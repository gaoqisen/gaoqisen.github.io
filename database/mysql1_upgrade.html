<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <title>Mysql ï¼è¿›é˜¶ | HOME</title><meta name="description" content="Mysqlçš„ä¸€äº›å­¦ä¹ ç¬”è®°">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-59402a70.css" as="style"><link rel="stylesheet" href="/assets/style-59402a70.css">
    <link rel="modulepreload" href="/assets/app-f4339f74.js"><link rel="modulepreload" href="/assets/framework-6b2b1681.js"><link rel="modulepreload" href="/assets/mysql1_upgrade.html-1fe9e3f2.js"><link rel="modulepreload" href="/assets/mysql1_upgrade.html-5693b7f5.js"><link rel="prefetch" href="/assets/index.html-14ee54e4.js" as="script"><link rel="prefetch" href="/assets/CodeDiligenceWay.html-22c8c8ca.js" as="script"><link rel="prefetch" href="/assets/CriticalThinking.html-5a63ab6d.js" as="script"><link rel="prefetch" href="/assets/EffectiveJava.html-cc48ccdf.js" as="script"><link rel="prefetch" href="/assets/LearnQuestion.html-daab7963.js" as="script"><link rel="prefetch" href="/assets/TheCleanCoder.html-4ea72117.js" as="script"><link rel="prefetch" href="/assets/acmen.html-4877ed93.js" as="script"><link rel="prefetch" href="/assets/00basic.html-35ac94db.js" as="script"><link rel="prefetch" href="/assets/01dataStructrue.html-8689dc1b.js" as="script"><link rel="prefetch" href="/assets/02sort.html-7ec00896.js" as="script"><link rel="prefetch" href="/assets/03link.html-a1aaa4c5.js" as="script"><link rel="prefetch" href="/assets/04tree.html-b77a30ea.js" as="script"><link rel="prefetch" href="/assets/05greedy.html-42cc035b.js" as="script"><link rel="prefetch" href="/assets/06unionSet.html-881e1382.js" as="script"><link rel="prefetch" href="/assets/07graph.html-63b82412.js" as="script"><link rel="prefetch" href="/assets/08violentRecursion.html-1b2de2a3.js" as="script"><link rel="prefetch" href="/assets/09dp.html-2f14ecb7.js" as="script"><link rel="prefetch" href="/assets/10slidingWindow.html-424a29f0.js" as="script"><link rel="prefetch" href="/assets/11monotonousStack.html-c89c1feb.js" as="script"><link rel="prefetch" href="/assets/12fibonacciSkill.html-06a0aedb.js" as="script"><link rel="prefetch" href="/assets/13kmp.html-7682d977.js" as="script"><link rel="prefetch" href="/assets/14Manacher.html-397b81fd.js" as="script"><link rel="prefetch" href="/assets/15bfprt.html-7d159259.js" as="script"><link rel="prefetch" href="/assets/16reservoirSmpling.html-77f1e011.js" as="script"><link rel="prefetch" href="/assets/17morris.html-d1936688.js" as="script"><link rel="prefetch" href="/assets/18segmentIndexTreeAC.html-d554a85f.js" as="script"><link rel="prefetch" href="/assets/19hash.html-6a46a2ee.js" as="script"><link rel="prefetch" href="/assets/20orderedList.html-62abbd6a.js" as="script"><link rel="prefetch" href="/assets/elk.html-4b87891d.js" as="script"><link rel="prefetch" href="/assets/mysql0_base.html-e4639a94.js" as="script"><link rel="prefetch" href="/assets/oracle.html-484eb97a.js" as="script"><link rel="prefetch" href="/assets/MyAndYou.html-6c36dde4.js" as="script"><link rel="prefetch" href="/assets/chengdu.html-65306cd9.js" as="script"><link rel="prefetch" href="/assets/phrase.html-09ccf59c.js" as="script"><link rel="prefetch" href="/assets/target.html-4aaf5452.js" as="script"><link rel="prefetch" href="/assets/command.html-9a1a3432.js" as="script"><link rel="prefetch" href="/assets/curl.html-c91387fb.js" as="script"><link rel="prefetch" href="/assets/git.html-7932c119.js" as="script"><link rel="prefetch" href="/assets/git_rsync.html-532980b5.js" as="script"><link rel="prefetch" href="/assets/gtilab.html-87b96605.js" as="script"><link rel="prefetch" href="/assets/jenkins.html-5d14a088.js" as="script"><link rel="prefetch" href="/assets/kubernetes.html-e8c3c22a.js" as="script"><link rel="prefetch" href="/assets/nginx.html-d0bd2fbd.js" as="script"><link rel="prefetch" href="/assets/vim.html-c806b024.js" as="script"><link rel="prefetch" href="/assets/vpn.html-b36fc4bd.js" as="script"><link rel="prefetch" href="/assets/AsyncManager.html-b62ea14d.js" as="script"><link rel="prefetch" href="/assets/HttpUtils.html-09e7de23.js" as="script"><link rel="prefetch" href="/assets/LogAspect.html-471473f5.js" as="script"><link rel="prefetch" href="/assets/RedisService.html-55322198.js" as="script"><link rel="prefetch" href="/assets/annotation.html-eff68c09.js" as="script"><link rel="prefetch" href="/assets/classloader.html-a29b3a3f.js" as="script"><link rel="prefetch" href="/assets/codeIssue.html-4dd55109.js" as="script"><link rel="prefetch" href="/assets/commomUse.html-9f704e28.js" as="script"><link rel="prefetch" href="/assets/distributed.html-d115f090.js" as="script"><link rel="prefetch" href="/assets/easyCodeTemplate.html-54706ea6.js" as="script"><link rel="prefetch" href="/assets/enum.html-4f3f2863.js" as="script"><link rel="prefetch" href="/assets/gc.html-534622c0.js" as="script"><link rel="prefetch" href="/assets/io.html-30cad8d9.js" as="script"><link rel="prefetch" href="/assets/jvm.html-36959ad2.js" as="script"><link rel="prefetch" href="/assets/lock.html-ca79c517.js" as="script"><link rel="prefetch" href="/assets/maven.html-5efdd188.js" as="script"><link rel="prefetch" href="/assets/netty.html-f940559d.js" as="script"><link rel="prefetch" href="/assets/nio.html-077f277e.js" as="script"><link rel="prefetch" href="/assets/reference.html-cef0378e.js" as="script"><link rel="prefetch" href="/assets/skill.html-80602bb4.js" as="script"><link rel="prefetch" href="/assets/socket.html-593623c1.js" as="script"><link rel="prefetch" href="/assets/threadSecurity.html-270e2c5b.js" as="script"><link rel="prefetch" href="/assets/view_flow.html-d4159e33.js" as="script"><link rel="prefetch" href="/assets/webCenter2.0.html-107a93cd.js" as="script"><link rel="prefetch" href="/assets/webJsonToken.html-7873fd0d.js" as="script"><link rel="prefetch" href="/assets/01DesignPettern.html-506f20ed.js" as="script"><link rel="prefetch" href="/assets/02MultiThread.html-15a77e7a.js" as="script"><link rel="prefetch" href="/assets/03Product.html-d6b9ee25.js" as="script"><link rel="prefetch" href="/assets/filebeat.html-898fad30.js" as="script"><link rel="prefetch" href="/assets/leaf.html-03ee9b5a.js" as="script"><link rel="prefetch" href="/assets/logstash.html-0c823b02.js" as="script"><link rel="prefetch" href="/assets/mycat.html-89701581.js" as="script"><link rel="prefetch" href="/assets/nacos.html-f81ec53d.js" as="script"><link rel="prefetch" href="/assets/redis.html-38d12a77.js" as="script"><link rel="prefetch" href="/assets/rocketmq.html-855d3075.js" as="script"><link rel="prefetch" href="/assets/skyWalking.html-fc946146.js" as="script"><link rel="prefetch" href="/assets/tomcatService.html-794299a3.js" as="script"><link rel="prefetch" href="/assets/OSI.html-4a98acf2.js" as="script"><link rel="prefetch" href="/assets/TCPIP.html-d68c1142.js" as="script"><link rel="prefetch" href="/assets/base.html-7f188dc0.js" as="script"><link rel="prefetch" href="/assets/reverseProxy.html-e4d204a7.js" as="script"><link rel="prefetch" href="/assets/alfred.html-5f6efdea.js" as="script"><link rel="prefetch" href="/assets/mac_command.html-e9ea3e0b.js" as="script"><link rel="prefetch" href="/assets/online_utils.html-1b01e695.js" as="script"><link rel="prefetch" href="/assets/bridge.html-ffa93593.js" as="script"><link rel="prefetch" href="/assets/builder.html-b0b392a2.js" as="script"><link rel="prefetch" href="/assets/chain_ofResponsibilitys.html-e98b76c9.js" as="script"><link rel="prefetch" href="/assets/chain_of_responsibility.html-e575bbf4.js" as="script"><link rel="prefetch" href="/assets/command.html-1194767f.js" as="script"><link rel="prefetch" href="/assets/component.html-acd171e0.js" as="script"><link rel="prefetch" href="/assets/decorate.html-e51f10e7.js" as="script"><link rel="prefetch" href="/assets/facade.html-83969f36.js" as="script"><link rel="prefetch" href="/assets/factory.html-e60a6bf7.js" as="script"><link rel="prefetch" href="/assets/interpreter.html-b7324fe0.js" as="script"><link rel="prefetch" href="/assets/iterator.html-631c845f.js" as="script"><link rel="prefetch" href="/assets/mediator.html-60cc5948.js" as="script"><link rel="prefetch" href="/assets/memento.html-14a57570.js" as="script"><link rel="prefetch" href="/assets/observable.html-a8d79892.js" as="script"><link rel="prefetch" href="/assets/observe.html-e5142302.js" as="script"><link rel="prefetch" href="/assets/prototype.html-5a866557.js" as="script"><link rel="prefetch" href="/assets/proxy.html-7152dea8.js" as="script"><link rel="prefetch" href="/assets/single.html-edf663a7.js" as="script"><link rel="prefetch" href="/assets/state.html-07b4e475.js" as="script"><link rel="prefetch" href="/assets/strategy.html-c0dacbdd.js" as="script"><link rel="prefetch" href="/assets/sum.html-14f86486.js" as="script"><link rel="prefetch" href="/assets/template.html-ec93db1c.js" as="script"><link rel="prefetch" href="/assets/visitor.html-6df0dc46.js" as="script"><link rel="prefetch" href="/assets/multiDataSource.html-ba6c704c.js" as="script"><link rel="prefetch" href="/assets/mybatis-1-flow.html-78edea5c.js" as="script"><link rel="prefetch" href="/assets/mybatis-2-basePackage.html-952535a6.js" as="script"><link rel="prefetch" href="/assets/mybatis-3-configParse.html-bff5a259.js" as="script"><link rel="prefetch" href="/assets/mybatis-4-core.html-6a5f8402.js" as="script"><link rel="prefetch" href="/assets/mybatis-5-sum.html-ace9cde8.js" as="script"><link rel="prefetch" href="/assets/spring-1-DLBF.html-30027af4.js" as="script"><link rel="prefetch" href="/assets/spring-2-CPXAC.html-1b3e40bb.js" as="script"><link rel="prefetch" href="/assets/assembly.html-800cad9a.js" as="script"><link rel="prefetch" href="/assets/c__.html-6afe1f95.js" as="script"><link rel="prefetch" href="/assets/computerNetworkTheory.html-6bc89b8b.js" as="script"><link rel="prefetch" href="/assets/interview.html-8bea1793.js" as="script"><link rel="prefetch" href="/assets/java.html-5c875483.js" as="script"><link rel="prefetch" href="/assets/software.html-2b8d796d.js" as="script"><link rel="prefetch" href="/assets/study.html-7ee64f59.js" as="script"><link rel="prefetch" href="/assets/train.html-c2779c8e.js" as="script"><link rel="prefetch" href="/assets/work_20221011.html-f273bb04.js" as="script"><link rel="prefetch" href="/assets/docker.html-c00ba1d0.js" as="script"><link rel="prefetch" href="/assets/dockerRsync.html-43148e8e.js" as="script"><link rel="prefetch" href="/assets/hadoop.html-7a82e5b2.js" as="script"><link rel="prefetch" href="/assets/idea.html-e246cc50.js" as="script"><link rel="prefetch" href="/assets/mindoc.html-99fba6e9.js" as="script"><link rel="prefetch" href="/assets/regex.html-36a2f239.js" as="script"><link rel="prefetch" href="/assets/springCloud.html-372d73cb.js" as="script"><link rel="prefetch" href="/assets/jqueryForm.html-06d3371a.js" as="script"><link rel="prefetch" href="/assets/vueBase.html-ffa99a3f.js" as="script"><link rel="prefetch" href="/assets/01åŸºæœ¬æ¡†æ¶.html-ee9b6fca.js" as="script"><link rel="prefetch" href="/assets/11åŠ¨è¯.html-d2e39a60.js" as="script"><link rel="prefetch" href="/assets/12åè¯.html-cea1e04a.js" as="script"><link rel="prefetch" href="/assets/13å½¢å®¹è¯.html-c4ac1d0b.js" as="script"><link rel="prefetch" href="/assets/14å‰¯è¯.html-562ebe92.js" as="script"><link rel="prefetch" href="/assets/21æ•°è¯.html-1db06fe5.js" as="script"><link rel="prefetch" href="/assets/22å† è¯.html-57a3b13d.js" as="script"><link rel="prefetch" href="/assets/23ä»£è¯.html-7ed27177.js" as="script"><link rel="prefetch" href="/assets/24ä»‹è¯.html-a3140347.js" as="script"><link rel="prefetch" href="/assets/25è¿è¯.html-dfd92655.js" as="script"><link rel="prefetch" href="/assets/31ç®€å•å¥.html-37ba8f3d.js" as="script"><link rel="prefetch" href="/assets/32ä»å¥.html-28831977.js" as="script"><link rel="prefetch" href="/assets/32å¤æ‚å¥.html-fc72e4b2.js" as="script"><link rel="prefetch" href="/assets/01éŸ³æ ‡.html-2f3b9f20.js" as="script"><link rel="prefetch" href="/assets/02åŒä¹‰è¯.html-4db41374.js" as="script"><link rel="prefetch" href="/assets/03å¥å­.html-5aadc723.js" as="script"><link rel="prefetch" href="/assets/04å½’ç±»è®°å¿†.html-cbbbe18e.js" as="script"><link rel="prefetch" href="/assets/05è¯ä¼™è®°å¿†1.html-c382b7ab.js" as="script"><link rel="prefetch" href="/assets/05è¯ä¼™è®°å¿†2.html-4397fb2b.js" as="script"><link rel="prefetch" href="/assets/06çŸ­è¯­.html-4aeeac31.js" as="script"><link rel="prefetch" href="/assets/06è¯ä¼™è®°å¿† 3.html-1384f76c.js" as="script"><link rel="prefetch" href="/assets/07å°ç‹å­.html-774d0cf1.js" as="script"><link rel="prefetch" href="/assets/08è€äººä¸æµ·.html-970551b0.js" as="script"><link rel="prefetch" href="/assets/09æ˜“æ··æ·†.html-0a9f44e2.js" as="script"><link rel="prefetch" href="/assets/10æ‹¼æ¥è¯.html-a97aa915.js" as="script"><link rel="prefetch" href="/assets/404.html-787fe5c4.js" as="script"><link rel="prefetch" href="/assets/index.html-fb901e13.js" as="script"><link rel="prefetch" href="/assets/index.html-5e659016.js" as="script"><link rel="prefetch" href="/assets/index.html-2334f86d.js" as="script"><link rel="prefetch" href="/assets/index.html-1d00a34d.js" as="script"><link rel="prefetch" href="/assets/index.html-d998b18f.js" as="script"><link rel="prefetch" href="/assets/index.html-189a1931.js" as="script"><link rel="prefetch" href="/assets/index.html-2bd1a8a7.js" as="script"><link rel="prefetch" href="/assets/index.html-8cb11943.js" as="script"><link rel="prefetch" href="/assets/index.html-7bb5bf9c.js" as="script"><link rel="prefetch" href="/assets/index.html-bd61b0e3.js" as="script"><link rel="prefetch" href="/assets/index.html-80757ebb.js" as="script"><link rel="prefetch" href="/assets/index.html-1a90d3ba.js" as="script"><link rel="prefetch" href="/assets/index.html-41e55e53.js" as="script"><link rel="prefetch" href="/assets/index.html-d42eefdd.js" as="script"><link rel="prefetch" href="/assets/index.html-837627da.js" as="script"><link rel="prefetch" href="/assets/index.html-7b14a6f0.js" as="script"><link rel="prefetch" href="/assets/index.html-c0c8366f.js" as="script"><link rel="prefetch" href="/assets/index.html-89691a45.js" as="script"><link rel="prefetch" href="/assets/index.html-d8149391.js" as="script"><link rel="prefetch" href="/assets/CodeDiligenceWay.html-a39ab80c.js" as="script"><link rel="prefetch" href="/assets/CriticalThinking.html-e2906c57.js" as="script"><link rel="prefetch" href="/assets/EffectiveJava.html-e85fdcbb.js" as="script"><link rel="prefetch" href="/assets/LearnQuestion.html-dd205ed9.js" as="script"><link rel="prefetch" href="/assets/TheCleanCoder.html-073b340c.js" as="script"><link rel="prefetch" href="/assets/acmen.html-24d230cb.js" as="script"><link rel="prefetch" href="/assets/00basic.html-69633b2f.js" as="script"><link rel="prefetch" href="/assets/01dataStructrue.html-67a4cbdd.js" as="script"><link rel="prefetch" href="/assets/02sort.html-6d52f6c2.js" as="script"><link rel="prefetch" href="/assets/03link.html-6f40b2f5.js" as="script"><link rel="prefetch" href="/assets/04tree.html-6427aa81.js" as="script"><link rel="prefetch" href="/assets/05greedy.html-fa2134da.js" as="script"><link rel="prefetch" href="/assets/06unionSet.html-daced349.js" as="script"><link rel="prefetch" href="/assets/07graph.html-2ccd23d3.js" as="script"><link rel="prefetch" href="/assets/08violentRecursion.html-03cc4ec2.js" as="script"><link rel="prefetch" href="/assets/09dp.html-fc59834e.js" as="script"><link rel="prefetch" href="/assets/10slidingWindow.html-fd8460f0.js" as="script"><link rel="prefetch" href="/assets/11monotonousStack.html-56947c86.js" as="script"><link rel="prefetch" href="/assets/12fibonacciSkill.html-440cc2a5.js" as="script"><link rel="prefetch" href="/assets/13kmp.html-8ef85b56.js" as="script"><link rel="prefetch" href="/assets/14Manacher.html-eb68a2bc.js" as="script"><link rel="prefetch" href="/assets/15bfprt.html-c8406a0c.js" as="script"><link rel="prefetch" href="/assets/16reservoirSmpling.html-8092e5e5.js" as="script"><link rel="prefetch" href="/assets/17morris.html-f7261490.js" as="script"><link rel="prefetch" href="/assets/18segmentIndexTreeAC.html-84313a3c.js" as="script"><link rel="prefetch" href="/assets/19hash.html-5dd8198e.js" as="script"><link rel="prefetch" href="/assets/20orderedList.html-f8089195.js" as="script"><link rel="prefetch" href="/assets/elk.html-ebf0c8a7.js" as="script"><link rel="prefetch" href="/assets/mysql0_base.html-e6a8ec98.js" as="script"><link rel="prefetch" href="/assets/oracle.html-8b01ac1a.js" as="script"><link rel="prefetch" href="/assets/MyAndYou.html-b9a101cb.js" as="script"><link rel="prefetch" href="/assets/chengdu.html-2832c2ca.js" as="script"><link rel="prefetch" href="/assets/phrase.html-8081aef1.js" as="script"><link rel="prefetch" href="/assets/target.html-75ab75ce.js" as="script"><link rel="prefetch" href="/assets/command.html-5658953b.js" as="script"><link rel="prefetch" href="/assets/curl.html-ffa87cf3.js" as="script"><link rel="prefetch" href="/assets/git.html-3b3d3e43.js" as="script"><link rel="prefetch" href="/assets/git_rsync.html-7933812d.js" as="script"><link rel="prefetch" href="/assets/gtilab.html-78f72f81.js" as="script"><link rel="prefetch" href="/assets/jenkins.html-c72fc37e.js" as="script"><link rel="prefetch" href="/assets/kubernetes.html-afb7c060.js" as="script"><link rel="prefetch" href="/assets/nginx.html-46872cac.js" as="script"><link rel="prefetch" href="/assets/vim.html-1f35a096.js" as="script"><link rel="prefetch" href="/assets/vpn.html-6f4cd6dc.js" as="script"><link rel="prefetch" href="/assets/AsyncManager.html-a8b014e3.js" as="script"><link rel="prefetch" href="/assets/HttpUtils.html-b804999f.js" as="script"><link rel="prefetch" href="/assets/LogAspect.html-eaa6ff4f.js" as="script"><link rel="prefetch" href="/assets/RedisService.html-72787937.js" as="script"><link rel="prefetch" href="/assets/annotation.html-e54c9064.js" as="script"><link rel="prefetch" href="/assets/classloader.html-9b88f8ba.js" as="script"><link rel="prefetch" href="/assets/codeIssue.html-88fbf4c4.js" as="script"><link rel="prefetch" href="/assets/commomUse.html-6cb39395.js" as="script"><link rel="prefetch" href="/assets/distributed.html-121dfdb6.js" as="script"><link rel="prefetch" href="/assets/easyCodeTemplate.html-0bf7964f.js" as="script"><link rel="prefetch" href="/assets/enum.html-d3581f52.js" as="script"><link rel="prefetch" href="/assets/gc.html-0d76a7a8.js" as="script"><link rel="prefetch" href="/assets/io.html-e5b6c34b.js" as="script"><link rel="prefetch" href="/assets/jvm.html-3e216f4d.js" as="script"><link rel="prefetch" href="/assets/lock.html-61bd8508.js" as="script"><link rel="prefetch" href="/assets/maven.html-8ad260eb.js" as="script"><link rel="prefetch" href="/assets/netty.html-170b6533.js" as="script"><link rel="prefetch" href="/assets/nio.html-21ad0eee.js" as="script"><link rel="prefetch" href="/assets/reference.html-145aa4ed.js" as="script"><link rel="prefetch" href="/assets/skill.html-7f1b728a.js" as="script"><link rel="prefetch" href="/assets/socket.html-eb2dc024.js" as="script"><link rel="prefetch" href="/assets/threadSecurity.html-ccc1ac0b.js" as="script"><link rel="prefetch" href="/assets/view_flow.html-6a8a28a1.js" as="script"><link rel="prefetch" href="/assets/webCenter2.0.html-c8531baf.js" as="script"><link rel="prefetch" href="/assets/webJsonToken.html-0a0e41fc.js" as="script"><link rel="prefetch" href="/assets/01DesignPettern.html-c80d8fdc.js" as="script"><link rel="prefetch" href="/assets/02MultiThread.html-45d70548.js" as="script"><link rel="prefetch" href="/assets/03Product.html-47d0eb81.js" as="script"><link rel="prefetch" href="/assets/filebeat.html-e18c4f63.js" as="script"><link rel="prefetch" href="/assets/leaf.html-f07d96ac.js" as="script"><link rel="prefetch" href="/assets/logstash.html-1e7982f3.js" as="script"><link rel="prefetch" href="/assets/mycat.html-0b6cc145.js" as="script"><link rel="prefetch" href="/assets/nacos.html-796fa429.js" as="script"><link rel="prefetch" href="/assets/redis.html-53c6cc96.js" as="script"><link rel="prefetch" href="/assets/rocketmq.html-f5894649.js" as="script"><link rel="prefetch" href="/assets/skyWalking.html-4f680b5d.js" as="script"><link rel="prefetch" href="/assets/tomcatService.html-e7dbf869.js" as="script"><link rel="prefetch" href="/assets/OSI.html-09ed62e9.js" as="script"><link rel="prefetch" href="/assets/TCPIP.html-6c87994e.js" as="script"><link rel="prefetch" href="/assets/base.html-0c6d25e5.js" as="script"><link rel="prefetch" href="/assets/reverseProxy.html-6d28a52c.js" as="script"><link rel="prefetch" href="/assets/alfred.html-54a720fc.js" as="script"><link rel="prefetch" href="/assets/mac_command.html-7b5fad3b.js" as="script"><link rel="prefetch" href="/assets/online_utils.html-c6b8694e.js" as="script"><link rel="prefetch" href="/assets/bridge.html-ae5273b6.js" as="script"><link rel="prefetch" href="/assets/builder.html-a0e8335f.js" as="script"><link rel="prefetch" href="/assets/chain_ofResponsibilitys.html-823632b4.js" as="script"><link rel="prefetch" href="/assets/chain_of_responsibility.html-1b9dc88d.js" as="script"><link rel="prefetch" href="/assets/command.html-bb29fa79.js" as="script"><link rel="prefetch" href="/assets/component.html-c91d510f.js" as="script"><link rel="prefetch" href="/assets/decorate.html-83c603cf.js" as="script"><link rel="prefetch" href="/assets/facade.html-997705ea.js" as="script"><link rel="prefetch" href="/assets/factory.html-829c43d8.js" as="script"><link rel="prefetch" href="/assets/interpreter.html-13253e05.js" as="script"><link rel="prefetch" href="/assets/iterator.html-1bb8a4df.js" as="script"><link rel="prefetch" href="/assets/mediator.html-d5536920.js" as="script"><link rel="prefetch" href="/assets/memento.html-b2f589b0.js" as="script"><link rel="prefetch" href="/assets/observable.html-97e7998f.js" as="script"><link rel="prefetch" href="/assets/observe.html-b1b6ad5d.js" as="script"><link rel="prefetch" href="/assets/prototype.html-0d84d2c8.js" as="script"><link rel="prefetch" href="/assets/proxy.html-b45d74cb.js" as="script"><link rel="prefetch" href="/assets/single.html-fb749c4e.js" as="script"><link rel="prefetch" href="/assets/state.html-ae674137.js" as="script"><link rel="prefetch" href="/assets/strategy.html-d338c5c6.js" as="script"><link rel="prefetch" href="/assets/sum.html-bd781ad4.js" as="script"><link rel="prefetch" href="/assets/template.html-a221e64b.js" as="script"><link rel="prefetch" href="/assets/visitor.html-6021fa46.js" as="script"><link rel="prefetch" href="/assets/multiDataSource.html-dc59e9f2.js" as="script"><link rel="prefetch" href="/assets/mybatis-1-flow.html-78c23745.js" as="script"><link rel="prefetch" href="/assets/mybatis-2-basePackage.html-7cfb6802.js" as="script"><link rel="prefetch" href="/assets/mybatis-3-configParse.html-0769fb46.js" as="script"><link rel="prefetch" href="/assets/mybatis-4-core.html-3305bd7d.js" as="script"><link rel="prefetch" href="/assets/mybatis-5-sum.html-3dda1ace.js" as="script"><link rel="prefetch" href="/assets/spring-1-DLBF.html-6a131ebd.js" as="script"><link rel="prefetch" href="/assets/spring-2-CPXAC.html-a47e3683.js" as="script"><link rel="prefetch" href="/assets/assembly.html-d21fc70b.js" as="script"><link rel="prefetch" href="/assets/c__.html-25b2cb30.js" as="script"><link rel="prefetch" href="/assets/computerNetworkTheory.html-29e0e6ed.js" as="script"><link rel="prefetch" href="/assets/interview.html-a7fbfc66.js" as="script"><link rel="prefetch" href="/assets/java.html-aad44f08.js" as="script"><link rel="prefetch" href="/assets/software.html-fd5e12c1.js" as="script"><link rel="prefetch" href="/assets/study.html-e3c2b5c1.js" as="script"><link rel="prefetch" href="/assets/train.html-14fd3bc0.js" as="script"><link rel="prefetch" href="/assets/work_20221011.html-e91440e8.js" as="script"><link rel="prefetch" href="/assets/docker.html-2cd2211b.js" as="script"><link rel="prefetch" href="/assets/dockerRsync.html-23139fb9.js" as="script"><link rel="prefetch" href="/assets/hadoop.html-99fadd38.js" as="script"><link rel="prefetch" href="/assets/idea.html-3076c78f.js" as="script"><link rel="prefetch" href="/assets/mindoc.html-8f79fd9c.js" as="script"><link rel="prefetch" href="/assets/regex.html-843cf51d.js" as="script"><link rel="prefetch" href="/assets/springCloud.html-a7661248.js" as="script"><link rel="prefetch" href="/assets/jqueryForm.html-320de07f.js" as="script"><link rel="prefetch" href="/assets/vueBase.html-8ca46c94.js" as="script"><link rel="prefetch" href="/assets/01åŸºæœ¬æ¡†æ¶.html-bedf481e.js" as="script"><link rel="prefetch" href="/assets/11åŠ¨è¯.html-f8722739.js" as="script"><link rel="prefetch" href="/assets/12åè¯.html-652e3cb5.js" as="script"><link rel="prefetch" href="/assets/13å½¢å®¹è¯.html-f200c2bf.js" as="script"><link rel="prefetch" href="/assets/14å‰¯è¯.html-67989c60.js" as="script"><link rel="prefetch" href="/assets/21æ•°è¯.html-194d16a0.js" as="script"><link rel="prefetch" href="/assets/22å† è¯.html-cf17b908.js" as="script"><link rel="prefetch" href="/assets/23ä»£è¯.html-f0c4ab18.js" as="script"><link rel="prefetch" href="/assets/24ä»‹è¯.html-b637079b.js" as="script"><link rel="prefetch" href="/assets/25è¿è¯.html-0b1323e5.js" as="script"><link rel="prefetch" href="/assets/31ç®€å•å¥.html-59bfca9e.js" as="script"><link rel="prefetch" href="/assets/32ä»å¥.html-f98174dc.js" as="script"><link rel="prefetch" href="/assets/32å¤æ‚å¥.html-3d1d1314.js" as="script"><link rel="prefetch" href="/assets/01éŸ³æ ‡.html-a42e47bc.js" as="script"><link rel="prefetch" href="/assets/02åŒä¹‰è¯.html-e4053e87.js" as="script"><link rel="prefetch" href="/assets/03å¥å­.html-55aa69e1.js" as="script"><link rel="prefetch" href="/assets/04å½’ç±»è®°å¿†.html-14cdab0c.js" as="script"><link rel="prefetch" href="/assets/05è¯ä¼™è®°å¿†1.html-4aa4db90.js" as="script"><link rel="prefetch" href="/assets/05è¯ä¼™è®°å¿†2.html-ad66beaa.js" as="script"><link rel="prefetch" href="/assets/06çŸ­è¯­.html-238ee2e7.js" as="script"><link rel="prefetch" href="/assets/06è¯ä¼™è®°å¿† 3.html-97bdfdba.js" as="script"><link rel="prefetch" href="/assets/07å°ç‹å­.html-f58f7b0d.js" as="script"><link rel="prefetch" href="/assets/08è€äººä¸æµ·.html-31e95675.js" as="script"><link rel="prefetch" href="/assets/09æ˜“æ··æ·†.html-8f5becf8.js" as="script"><link rel="prefetch" href="/assets/10æ‹¼æ¥è¯.html-0b7e11fd.js" as="script"><link rel="prefetch" href="/assets/404.html-b9bd2d87.js" as="script"><link rel="prefetch" href="/assets/index.html-e123dbfb.js" as="script"><link rel="prefetch" href="/assets/index.html-f7207b30.js" as="script"><link rel="prefetch" href="/assets/index.html-aeeaf98c.js" as="script"><link rel="prefetch" href="/assets/index.html-a06a8e43.js" as="script"><link rel="prefetch" href="/assets/index.html-f3bf9a41.js" as="script"><link rel="prefetch" href="/assets/index.html-5947fcec.js" as="script"><link rel="prefetch" href="/assets/index.html-d51f4b51.js" as="script"><link rel="prefetch" href="/assets/index.html-94cc96cb.js" as="script"><link rel="prefetch" href="/assets/index.html-fe0ea5d7.js" as="script"><link rel="prefetch" href="/assets/index.html-fbd61fd4.js" as="script"><link rel="prefetch" href="/assets/index.html-f2fe89e7.js" as="script"><link rel="prefetch" href="/assets/index.html-4ea04cf1.js" as="script"><link rel="prefetch" href="/assets/index.html-498efb1e.js" as="script"><link rel="prefetch" href="/assets/index.html-4273a498.js" as="script"><link rel="prefetch" href="/assets/index.html-ee607ba6.js" as="script"><link rel="prefetch" href="/assets/index.html-dc031e84.js" as="script"><link rel="prefetch" href="/assets/index.html-7f95198b.js" as="script"><link rel="prefetch" href="/assets/index.html-b3e09f67.js" as="script"><link rel="prefetch" href="/assets/plyr.min-4a928d69.js" as="script"><link rel="prefetch" href="/assets/plyr.min-4a928d69.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-6e6cbe40.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to main content</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><!----><!----><span class="site-name">HOME</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!----><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/" class="nav-link sidebar-link sidebar-page" aria-label="home"><span class="font-icon icon home" style=""></span>home<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Algorithm</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Book</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Database</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/database/elk.html" class="nav-link sidebar-link sidebar-page" aria-label="linux+elasticsearch+logstash è‡ªåŠ¨åŒæ­¥mysqlå®ç°æœç´¢å¼•æ“"><!---->linux+elasticsearch+logstash è‡ªåŠ¨åŒæ­¥mysqlå®ç°æœç´¢å¼•æ“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/database/mysql1_upgrade.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Mysql ï¼è¿›é˜¶"><!---->Mysql ï¼è¿›é˜¶<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#ä¸€ã€mysqlçš„-akf-ç«‹æ–¹ä½“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸€ã€Mysqlçš„ AKF ç«‹æ–¹ä½“"><!---->ä¸€ã€Mysqlçš„ AKF ç«‹æ–¹ä½“<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_1-2-é«˜å¯ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 é«˜å¯ç”¨"><!---->1.2 é«˜å¯ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_1-2-åˆ†åº“åˆ†è¡¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 åˆ†åº“åˆ†è¡¨"><!---->1.2 åˆ†åº“åˆ†è¡¨<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#äºŒã€innodbä¸‰å¤§ç‰¹æ€§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äºŒã€InnoDBä¸‰å¤§ç‰¹æ€§"><!---->äºŒã€InnoDBä¸‰å¤§ç‰¹æ€§<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_2-1-ç¼“å†²æ± " class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 ç¼“å†²æ± "><!---->2.1 ç¼“å†²æ± <!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_2-2-åŒå†™ç¼“å†²åŒº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 åŒå†™ç¼“å†²åŒº"><!---->2.2 åŒå†™ç¼“å†²åŒº<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_2-3-è‡ªé€‚åº”å“ˆå¸Œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 è‡ªé€‚åº”å“ˆå¸Œ"><!---->2.3 è‡ªé€‚åº”å“ˆå¸Œ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#ä¸‰ã€mysql-è¯­å¥æ‰§è¡Œè¿‡ç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‰ã€Mysql è¯­å¥æ‰§è¡Œè¿‡ç¨‹"><!---->ä¸‰ã€Mysql è¯­å¥æ‰§è¡Œè¿‡ç¨‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_2-1-æŸ¥è¯¢è¯­å¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 æŸ¥è¯¢è¯­å¥"><!---->2.1 æŸ¥è¯¢è¯­å¥<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_2-2-å¢åˆ æ”¹è¯­å¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 å¢åˆ æ”¹è¯­å¥"><!---->2.2 å¢åˆ æ”¹è¯­å¥<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#å››ã€äº‹åŠ¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å››ã€äº‹åŠ¡"><!---->å››ã€äº‹åŠ¡<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_4-1-acid" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 ACID"><!---->4.1 ACID<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_4-2-mvcc" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2 MVCC"><!---->4.2 MVCC<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_4-3-rrä¸‹çš„å¹»è¯»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.3 RRä¸‹çš„å¹»è¯»"><!---->4.3 RRä¸‹çš„å¹»è¯»<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#äº”ã€ç´¢å¼•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äº”ã€ç´¢å¼•"><!---->äº”ã€ç´¢å¼•<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_5-1-ç´¢å¼•ç»“æ„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1 ç´¢å¼•ç»“æ„"><!---->5.1 ç´¢å¼•ç»“æ„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_5-2-ç´¢å¼•åˆ†ç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2 ç´¢å¼•åˆ†ç±»"><!---->5.2 ç´¢å¼•åˆ†ç±»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_5-3-é€‰æ‹©åˆé€‚çš„ç´¢å¼•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.3 é€‰æ‹©åˆé€‚çš„ç´¢å¼•"><!---->5.3 é€‰æ‹©åˆé€‚çš„ç´¢å¼•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_5-4-é¿å…ç´¢å¼•å¤±æ•ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.4  é¿å…ç´¢å¼•å¤±æ•ˆ"><!---->5.4  é¿å…ç´¢å¼•å¤±æ•ˆ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#å…­ã€ä¼˜åŒ–å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…­ã€ä¼˜åŒ–å™¨"><!---->å…­ã€ä¼˜åŒ–å™¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_6-1-æ‰§è¡Œè®¡åˆ’" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.1  æ‰§è¡Œè®¡åˆ’"><!---->6.1  æ‰§è¡Œè®¡åˆ’<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_6-2-æˆæœ¬è®¡ç®—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.2 æˆæœ¬è®¡ç®—"><!---->6.2 æˆæœ¬è®¡ç®—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_6-3-ä¼˜åŒ–æ…¢sql" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.3 ä¼˜åŒ–æ…¢SQL"><!---->6.3 ä¼˜åŒ–æ…¢SQL<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#ä¸ƒã€é”" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸ƒã€é”"><!---->ä¸ƒã€é”<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_7-1-åˆ†ç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.1 åˆ†ç±»"><!---->7.1 åˆ†ç±»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_7-2-æ­»é”æ£€æµ‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.2 æ­»é”æ£€æµ‹"><!---->7.2 æ­»é”æ£€æµ‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#_7-3-è¡¨åŠ å­—æ®µ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.3 è¡¨åŠ å­—æ®µ"><!---->7.3 è¡¨åŠ å­—æ®µ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/database/mysql1_upgrade.html#å…«ã€ä¸­é—´ä»¶å¯¹æ¯”" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…«ã€ä¸­é—´ä»¶å¯¹æ¯”"><!---->å…«ã€ä¸­é—´ä»¶å¯¹æ¯”<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/database/mysql0_base.html" class="nav-link sidebar-link sidebar-page" aria-label="Mysql-åŸºç¡€"><!---->Mysql-åŸºç¡€<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/database/oracle.html" class="nav-link sidebar-link sidebar-page" aria-label="oracle ï¼å­¦ä¹ ç¬”è®°"><!---->oracle ï¼å­¦ä¹ ç¬”è®°<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">English</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Java</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Life</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Linux</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Mca</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Middleware</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Network</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Other</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Pattern</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Sourcecode</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Study</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Tool</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Web</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Mysql ï¼è¿›é˜¶</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="Writing DateğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-11-28T22:10:11.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 40 min</span><meta property="timeRequired" content="PT40M"></span><span class="page-category-info" aria-label="CategoryğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category6" role>database</span><meta property="articleSection" content="database"></span><span class="page-tag-info" aria-label="TagğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag6" role>mysq</span><meta property="keywords" content="mysq"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<button class="print-button" title="print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#ä¸€ã€mysqlçš„-akf-ç«‹æ–¹ä½“" class="router-link-active router-link-exact-active toc-link level2">ä¸€ã€Mysqlçš„ AKF ç«‹æ–¹ä½“</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_1-2-é«˜å¯ç”¨" class="router-link-active router-link-exact-active toc-link level3">1.2 é«˜å¯ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_1-2-åˆ†åº“åˆ†è¡¨" class="router-link-active router-link-exact-active toc-link level3">1.2 åˆ†åº“åˆ†è¡¨</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#äºŒã€innodbä¸‰å¤§ç‰¹æ€§" class="router-link-active router-link-exact-active toc-link level2">äºŒã€InnoDBä¸‰å¤§ç‰¹æ€§</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_2-1-ç¼“å†²æ± " class="router-link-active router-link-exact-active toc-link level3">2.1 ç¼“å†²æ± </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_2-2-åŒå†™ç¼“å†²åŒº" class="router-link-active router-link-exact-active toc-link level3">2.2 åŒå†™ç¼“å†²åŒº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_2-3-è‡ªé€‚åº”å“ˆå¸Œ" class="router-link-active router-link-exact-active toc-link level3">2.3 è‡ªé€‚åº”å“ˆå¸Œ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#ä¸‰ã€mysql-è¯­å¥æ‰§è¡Œè¿‡ç¨‹" class="router-link-active router-link-exact-active toc-link level2">ä¸‰ã€Mysql è¯­å¥æ‰§è¡Œè¿‡ç¨‹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_2-1-æŸ¥è¯¢è¯­å¥" class="router-link-active router-link-exact-active toc-link level3">2.1 æŸ¥è¯¢è¯­å¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_2-2-å¢åˆ æ”¹è¯­å¥" class="router-link-active router-link-exact-active toc-link level3">2.2 å¢åˆ æ”¹è¯­å¥</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#å››ã€äº‹åŠ¡" class="router-link-active router-link-exact-active toc-link level2">å››ã€äº‹åŠ¡</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_4-1-acid" class="router-link-active router-link-exact-active toc-link level3">4.1 ACID</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_4-2-mvcc" class="router-link-active router-link-exact-active toc-link level3">4.2 MVCC</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_4-3-rrä¸‹çš„å¹»è¯»" class="router-link-active router-link-exact-active toc-link level3">4.3 RRä¸‹çš„å¹»è¯»</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#äº”ã€ç´¢å¼•" class="router-link-active router-link-exact-active toc-link level2">äº”ã€ç´¢å¼•</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_5-1-ç´¢å¼•ç»“æ„" class="router-link-active router-link-exact-active toc-link level3">5.1 ç´¢å¼•ç»“æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_5-2-ç´¢å¼•åˆ†ç±»" class="router-link-active router-link-exact-active toc-link level3">5.2 ç´¢å¼•åˆ†ç±»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_5-3-é€‰æ‹©åˆé€‚çš„ç´¢å¼•" class="router-link-active router-link-exact-active toc-link level3">5.3 é€‰æ‹©åˆé€‚çš„ç´¢å¼•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_5-4-é¿å…ç´¢å¼•å¤±æ•ˆ" class="router-link-active router-link-exact-active toc-link level3">5.4  é¿å…ç´¢å¼•å¤±æ•ˆ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#å…­ã€ä¼˜åŒ–å™¨" class="router-link-active router-link-exact-active toc-link level2">å…­ã€ä¼˜åŒ–å™¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_6-1-æ‰§è¡Œè®¡åˆ’" class="router-link-active router-link-exact-active toc-link level3">6.1  æ‰§è¡Œè®¡åˆ’</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_6-2-æˆæœ¬è®¡ç®—" class="router-link-active router-link-exact-active toc-link level3">6.2 æˆæœ¬è®¡ç®—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_6-3-ä¼˜åŒ–æ…¢sql" class="router-link-active router-link-exact-active toc-link level3">6.3 ä¼˜åŒ–æ…¢SQL</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#ä¸ƒã€é”" class="router-link-active router-link-exact-active toc-link level2">ä¸ƒã€é”</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_7-1-åˆ†ç±»" class="router-link-active router-link-exact-active toc-link level3">7.1 åˆ†ç±»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_7-2-æ­»é”æ£€æµ‹" class="router-link-active router-link-exact-active toc-link level3">7.2 æ­»é”æ£€æµ‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#_7-3-è¡¨åŠ å­—æ®µ" class="router-link-active router-link-exact-active toc-link level3">7.3 è¡¨åŠ å­—æ®µ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/database/mysql1_upgrade.html#å…«ã€ä¸­é—´ä»¶å¯¹æ¯”" class="router-link-active router-link-exact-active toc-link level2">å…«ã€ä¸­é—´ä»¶å¯¹æ¯”</a></li><!----><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h2 id="ä¸€ã€mysqlçš„-akf-ç«‹æ–¹ä½“" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€mysqlçš„-akf-ç«‹æ–¹ä½“" aria-hidden="true">#</a> ä¸€ã€Mysqlçš„ AKF ç«‹æ–¹ä½“</h2><p>ç”¨ AKF ç†è§£ä¸‹ mysqlä¸ºäº†ç¡®ä¿æ•°æ®åº“çš„é«˜å¯ç”¨æ€§åœ¨å¤„ç†æµ·é‡æ•°æ®çš„æ—¶æ˜¯å¦‚ä½•å®ç°çš„</p><p><img src="https://gaoqisen.github.io/GraphBed/202412/20241123234031462.png" alt="image-20241123234031462"></p><p>X è½´ï¼šä¸ºäº†è§£å†³å•ç‚¹æ•…éšœï¼Œmysql å¯ä»¥ç”¨ <strong>ä¸»ä»å¤åˆ¶</strong> ç­‰æ–¹å¼è¿›è¡Œå‰¯æœ¬æ‰©å±•ï¼Œè¿™æ ·åœ¨å…¶ä¸­ä¸€å°æœºå™¨å‡ºç°æ•…éšœæ—¶ã€‚å…¶ä»–çš„æœºå™¨ä¹Ÿèƒ½æ­£å¸¸æä¾›æœåŠ¡</p><p>Y è½´ï¼šå¯ä»¥ç†è§£ä¸ºæ•°æ®çš„å‚ç›´æ‹†åˆ†ï¼Œæ¯”å¦‚å½“æ•°æ®é‡å¤ªå¤§çš„æ—¶å€™ï¼Œå•è¡¨çš„æ•°æ®åˆ—å¤ªå¤šï¼Œå¯ä»¥å°†è¡¨æ‹†åˆ†ä¸ºå¤šå¼ è¡¨ã€‚ä¹Ÿå¯ä»¥å°†æ•°æ®è¿›è¡Œ <strong>åˆ†åº“</strong> æ¯”å¦‚ç”¨æˆ·åº“ã€è®¢å•åº“ç­‰ï¼Œè¿™æ ·å¯ä»¥é¿å…å•ç‚¹æ•…éšœç”¨æˆ·åº“å‡ºç°é—®é¢˜åè®¢å•åº“è¿˜æ˜¯èƒ½æä¾›æœåŠ¡çš„ã€‚</p><p>Zè½´: å¯ä»¥ç†è§£ä¸ºæ•°æ®çš„æ°´å¹³æ‹†åˆ†ï¼Œæ¯”å¦‚ç”¨æˆ·åº“é‡Œé¢çš„ç”¨æˆ·æ•°æ®å¤ªå¤šï¼Œå•è¡¨æŸ¥è¯¢å¾ˆæ…¢å¯ä»¥è¿›è¡Œç”¨æˆ· ID çš„å–æ¨¡ <strong>åˆ†è¡¨</strong> æ“ä½œï¼Œè¿™ç§åˆ†è¡¨æ“ä½œå°±æ˜¯åˆ†åŒºçš„æ•ˆæœï¼ˆ100 wçš„æ•°æ®æ¨¡ 10ï¼Œå°±æ˜¯å°†æ•°æ®åˆ†ä¸º 10 ä»½æ¯ä»½ 10w çš„æ•°æ®åˆ†åŒºï¼‰ã€‚</p><p>ä¸Šé¢æ¯ä¸ªè½´çš„å…·ä½“å®ç°æ–¹å¼å„æœ‰ä¸åŒï¼Œå…³é”®ç‚¹å°±æ˜¯å‰¯æœ¬çš„æ‰©å±•å’Œåˆ†åº“åˆ†è¡¨ã€‚å‰¯æœ¬çš„æ‰©å±•è¦è€ƒè™‘å‰¯æœ¬ä¹‹é—´çš„æ•°æ®å¦‚ä½•åŒæ­¥ï¼Œæ‰©å±•çš„æ—¶å€™å‡ºç°å•ç‚¹æ•…éšœå¦‚ä½•æ¢å¤ç­‰é—®é¢˜ï¼Œä¸‹é¢å…ˆäº†è§£ä¸‹å‰¯æœ¬æ‰©å±•çš„å„ç§æ¶æ„æ¼”è¿›</p><h3 id="_1-2-é«˜å¯ç”¨" tabindex="-1"><a class="header-anchor" href="#_1-2-é«˜å¯ç”¨" aria-hidden="true">#</a> 1.2 é«˜å¯ç”¨</h3><p>å¸¸è§çš„é«˜å¯ç”¨æ¶æ„æ–¹æ¡ˆï¼Œæ¯ç§æ¶æ„éƒ½æ˜¯é‡åˆ°é—®é¢˜åæ…¢æ…¢æ¼”è¿›å‡ºæ¥çš„ï¼Œä¸‹é¢é€šè¿‡æ—¶é—´å’Œç‰ˆæœ¬æ¢³ç†ä¸‹ã€‚</p><table><thead><tr><th style="text-align:left;">æ¶æ„æ–¹å¼</th><th>å¹´ä»½</th><th>ç‰ˆæœ¬</th><th>è§£å†³é—®é¢˜</th></tr></thead><tbody><tr><td style="text-align:left;">ä¸»ä»å¤åˆ¶æ¶æ„ï¼ˆMaster - Slave Replicationï¼‰</td><td>1999</td><td>3.23</td><td>å®˜æ–¹æä¾›çš„é˜²æ­¢æ•°æ®ä¸¢å¤±ã€è¯»å†™åˆ†ç¦»</td></tr><tr><td style="text-align:left;">åŒä¸»å¤åˆ¶æ¶æ„ï¼ˆDual - Master Replicationï¼‰</td><td>2005</td><td>5.0</td><td>å®˜æ–¹æä¾›çš„åŒå‘æ•°æ®åŒæ­¥ï¼Œå¼‚åœ°å®¹ç¾</td></tr><tr><td style="text-align:left;">ä¸»ä¸»å¤åˆ¶ç®¡ç† MMM(Master-Master replication manager)</td><td>2007ï½2008</td><td>5.0+</td><td>Open Queryå…¬å¸å¼€å‘çš„ç®€åŒ–ä¸»ä¸»å¤åˆ¶æ•…éšœåˆ‡æ¢ã€æé«˜å¯ç”¨æ€§</td></tr><tr><td style="text-align:left;">é›†ç¾¤é«˜å¯ç”¨ MHA<br>ï¼ˆMySQL Master High Availabilityï¼‰</td><td>2010ï½2011</td><td>5.1+</td><td>Yahooå…¬å¸å¼€å‘çš„å‡å°‘åˆ‡æ¢ä¸»ä»é€Ÿåº¦ã€è‡ªåŠ¨ä¿®å¤å¤åˆ¶å…³ç³»</td></tr><tr><td style="text-align:left;">åŠåŒæ­¥ï¼ˆåŠåŒæ­¥Semisynchronous replicationï¼‰</td><td>2010</td><td>5.5+</td><td>å®˜æ–¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜</td></tr><tr><td style="text-align:left;">ProxySql + ä¸»ä»å¤åˆ¶</td><td>2013</td><td>5.6+</td><td>ProxySQLå¼€æºç¤¾åŒºæä¾›çš„é€šè¿‡ä¸­é—´ä»¶å®ç°è¯»å†™åˆ†ç¦»å’Œè´Ÿè½½å‡è¡¡</td></tr><tr><td style="text-align:left;">åˆ†ç‰‡ + é«˜å¯ç”¨</td><td>2013</td><td>5.6+</td><td>Googleã€Facebookç­‰æµ·é‡æ•°æ®å­˜å‚¨+è¶…å¤§è§„æ¨¡ç³»ç»Ÿ</td></tr><tr><td style="text-align:left;">Mysqlç»„å¤åˆ¶ MGRï¼ˆMySQL Group Replicationï¼‰</td><td>2016</td><td>5.7.17+</td><td>å®˜æ–¹å®ç°Paxos ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€é«˜å¯ç”¨å’Œè‡ªåŠ¨æ•…éšœå¤„ç†</td></tr><tr><td style="text-align:left;">InnoDB Cluster</td><td>2016</td><td>8.0+</td><td>å®˜æ–¹ä¸€ç«™å¼é«˜å¯ç”¨æ–¹æ¡ˆ</td></tr></tbody></table><p>å„ç§æ¶æ„çš„ä¼˜ç¼ºç‚¹åˆ†æ</p><table><thead><tr><th style="text-align:left;">æ¶æ„æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>åŸç†</th></tr></thead><tbody><tr><td style="text-align:left;">ä¸»ä»å¤åˆ¶æ¶æ„MSR</td><td>ç®€å•æ˜“ç”¨ï¼Œæä¾›è¯»å†™åˆ†ç¦»</td><td>å•ç‚¹æ•…éšœé£é™©é«˜</td><td>ä¸»èŠ‚ç‚¹å†™å…¥binlogæ—¥å¿—ï¼Œä»èŠ‚ç‚¹åŒæ­¥æ•°æ®</td></tr><tr><td style="text-align:left;">åŒä¸»å¤åˆ¶æ¶æ„</td><td>åŒä¸»äº’ç›¸å¤‡ä»½ï¼Œå®ç°é«˜å¯ç”¨ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</td><td>å†™å…¥å†²çªæ›´æ–°ä¸¢å¤±ï¼Œåˆ‡æ¢å¤æ‚</td><td>ä¸¤ä¸ªä¸»èŠ‚ç‚¹äº’ç›¸å†™å…¥æ•°æ®ï¼Œäº’ç›¸å¤åˆ¶å¯¹æ–¹çš„å˜æ›´</td></tr><tr><td style="text-align:left;">ä¸»ä¸»å¤åˆ¶ç®¡ç†MMM</td><td>ä¸»ä¸»å¤åˆ¶ï¼Œé¿å…å•ç‚¹æ•…éšœ</td><td>éƒ¨ç½²ç»´æŠ¤å¤æ‚</td><td>é€šè¿‡ç›‘è§†å¤åˆ¶å»¶è¿Ÿå®ç°è‡ªåŠ¨æ•…éšœåˆ‡æ¢</td></tr><tr><td style="text-align:left;">é›†ç¾¤é«˜å¯ç”¨ MHA</td><td>ä¸»ä»è‡ªåŠ¨åŒ–æ•…éšœåˆ‡æ¢ï¼Œå¿«é€Ÿæ•…éšœæ¢å¤</td><td>éƒ¨ç½²å’Œé…ç½®å¤æ‚</td><td>ç›‘æ§ä¸»èŠ‚ç‚¹çŠ¶æ€å’Œå¥åº·å®ç°è‡ªåŠ¨æ•…éšœåˆ‡æ¢</td></tr><tr><td style="text-align:left;">åŠåŒæ­¥</td><td>æä¾›æ›´é«˜çš„æ•°æ®ä¸€è‡´æ€§å’Œå¯é æ€§</td><td>å¯¹ç½‘ç»œå»¶è¿Ÿæ•æ„Ÿ</td><td>å†™å…¥æ•°æ®éœ€è¦æ‰§è‡³å°‘ä¸€ä¸ªä»èŠ‚ç‚¹æ”¶åˆ°æ•°æ®åæäº¤äº‹åŠ¡</td></tr><tr><td style="text-align:left;">ProxySql + ä¸»ä»å¤åˆ¶</td><td>æä¾›è´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»</td><td>éœ€è¦é¢å¤–çš„ä¸­é—´ä»¶ï¼Œå¢åŠ å¤æ‚æ€§</td><td>ä»£ç†å±‚è¿›è¡Œè·¯ç”±ç›‘æ§èŠ‚ç‚¹çŠ¶æ€å®ç°æ•…éšœè½¬ç§»</td></tr><tr><td style="text-align:left;">åˆ†ç‰‡ + é«˜å¯ç”¨</td><td>å®ç°æ°´å¹³æ‰©å±•ï¼Œé€‚ç”¨å¤§è§„æ¨¡æ•°æ®</td><td>éƒ¨ç½²å’Œç®¡ç†å¤æ‚</td><td>æ•°æ®è¿›è¡Œæ°´å¹³åˆ†ç‰‡å+MHA</td></tr><tr><td style="text-align:left;">Mysqlç»„å¤åˆ¶MGR</td><td>æä¾›é«˜å¯ç”¨+æ•°æ®ä¸€è‡´æ€§ï¼Œæ”¯æŒè‡ªåŠ¨æ•…éšœè½¬ç§»</td><td>éƒ¨ç½²ç®¡ç†å¤æ‚</td><td>å¤šä¸ªæ•°æ®åº“èŠ‚ç‚¹å½¢æˆç»„ï¼Œé€šè¿‡ç»„å¤åˆ¶åè®®å®ç°åŒæ­¥å’Œæ•…éšœå¤„ç†</td></tr><tr><td style="text-align:left;">InnoDB Cluster</td><td>é›†æˆé«˜å¯ç”¨å’Œç¾éš¾æ¢å¤æ–¹æ¡ˆï¼Œæ”¯æŒè‡ªåŠ¨åŒ–ç®¡ç†å’Œç›‘æ§</td><td>éœ€è¦MysqlRouterï¼Œå¼•å…¥é¢å¤–ç»„ä»¶</td><td>ä½¿ç”¨Mysql Shell+Group Replicationç»„ä»¶å®ç°è‡ªåŠ¨æ•…éšœè½¬ç§»ã€æ•°æ®åŒæ­¥å’Œç®¡ç†ï¼ŒåŸºäºbinlogå’Œç»„å¤åˆ¶åè®®å®ç°é«˜å¯ç”¨</td></tr></tbody></table><p>ä¸»ä»å¤åˆ¶</p><p><img src="https://gaoqisen.github.io/GraphBed/202411/20241127225955.png" alt="image"></p><p>MMM</p><p><img src="https://gaoqisen.github.io/GraphBed/202411/20241127232754.png" alt="MMM"></p><p>MHA</p><p><img src="https://gaoqisen.github.io/GraphBed/202411/20241127232950.png" alt="MHA"></p><p>åŠåŒæ­¥</p><p><img src="https://gaoqisen.github.io/GraphBed/202411/20241127233636.png" alt="åŠåŒæ­¥"></p><p>MHA+åŠåŒæ­¥</p><p><img src="https://gaoqisen.github.io/GraphBed/202411/20241127234122.png" alt=""></p><p>MGR</p><p><img src="https://gaoqisen.github.io/GraphBed/202411/20241127234718.png" alt="MGR"></p><p>InnoDB Cluster</p><p><img src="https://gaoqisen.github.io/GraphBed/202411/20241127235148.png" alt=""></p><h3 id="_1-2-åˆ†åº“åˆ†è¡¨" tabindex="-1"><a class="header-anchor" href="#_1-2-åˆ†åº“åˆ†è¡¨" aria-hidden="true">#</a> 1.2 åˆ†åº“åˆ†è¡¨</h3><p>åœ¨æ•°æ®é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œå•ä¸ªæ•°æ®åº“æ‰¿è½½çš„å‹åŠ›æœ‰é™ã€‚è¿™æ—¶å€™å°±ä¼šè€ƒè™‘åˆ†åº“ï¼Œç”¨æˆ·åº“ã€è®¢å•åº“ç­‰ï¼Œæ¯ä¸ªåº“æ‹†åˆ†å¼€å•ç‹¬å¤„ç†ã€‚åœ¨æ‹†åˆ†å¼€ä¹‹åå•è¡¨æ•°æ®é‡è¿˜æ˜¯å¤ªå¤§ï¼ŒæŸ¥è¯¢é€Ÿåº¦ä¼šä¸‹é™ã€‚è¿™æ—¶å€™å°±éœ€è¦å°†æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œæ¯”å¦‚å°†æ•°æ®åˆ†ä¸º 128 å¼ è¡¨ï¼Œé€šè¿‡ç”¨æˆ· id è¿›è¡Œå–æ¨¡è¿ç®—ã€‚å¸¸è§çš„åˆ†åº“åˆ†è¡¨æœ‰ Mycatã€ShardingSphere ï¼Œä»–ä»¬çš„åŸç†æ˜¯é€šè¿‡åˆ†ç‰‡ç­–ç•¥è¿›è¡Œè¡¨è·¯ç”±æŸ¥è¯¢ï¼Œä½†æ˜¯åˆ†è¡¨ä¹‹åæœ‰ä¸€äº› sql è¯­å¥å°±æ²¡åŠæ³•æ‰§è¡Œã€‚å½“ç„¶é€šè¿‡hive ç­‰å¤§æ•°æ®æ–¹æ¡ˆå¯ä»¥å°†æ•°æ®èšåˆåœ¨ä¸€èµ·ï¼Œè¿™æ ·å°±å¯ä»¥æ‰§è¡Œåˆ†è¡¨åæ²¡åŠæ³•æ‰§è¡Œçš„ sqlã€‚</p><h2 id="äºŒã€innodbä¸‰å¤§ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#äºŒã€innodbä¸‰å¤§ç‰¹æ€§" aria-hidden="true">#</a> äºŒã€InnoDBä¸‰å¤§ç‰¹æ€§</h2><p><img src="https://gaoqisen.github.io/GraphBed/202412/20241203215851.png" alt="mysql æ¶æ„å›¾"></p><p><img src="https://gaoqisen.github.io/GraphBed/202412/20241203220135.png" alt="mysql æ•°æ®æ ¼å¼"></p><h3 id="_2-1-ç¼“å†²æ± " tabindex="-1"><a class="header-anchor" href="#_2-1-ç¼“å†²æ± " aria-hidden="true">#</a> 2.1 ç¼“å†²æ± </h3><p>Buffer Poolç¼“å†²æ± æ˜¯ innodb çš„ä¸€ä¸ªå†…å­˜åŒºåŸŸï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ç£ç›˜æ•°æ®é‡Œé¢çš„æ•°æ®ä¸­è½¬ç«™ã€‚ä¸¾ä¸ªä¾‹å­æ¯”å¦‚ç£ç›˜æ˜¯ 50G, å†…å­˜ 8Gï¼Œåœ¨æŸ¥è¯¢æ•°æ®æ—¶å¦‚æœæ²¡æœ‰ç´¢å¼•å°±ä¼šè¿›è¡Œå…¨è¡¨æ‰«æï¼Œé‚£ä¹ˆåœ¨æ‰«æçš„æ—¶å€™ä¸èƒ½æŠŠç£ç›˜é‡Œé¢çš„æ•°æ®å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç¼“å­˜æ± çš„å¥½å¤„</p><p>1ã€Buffer Poolå°±èƒ½åŠ è½½ä¸€éƒ¨åˆ†çš„æ•°æ®åˆ°å†…å­˜è¿›è¡ŒæŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾å®Œæˆåæ›¿æ¢ä¸‹ä¸€æ‰¹æ•°æ®ã€‚ç¼“å­˜çš„æ•°æ®å¦‚æœæ˜¯é«˜é¢‘æŸ¥è¯¢æ•°æ®é‚£ä¹ˆä¸‹æ¬¡æŸ¥è¯¢çš„æ—¶å€™å°±å¯ä»¥ä¸ç”¨åˆ‡æ¢åˆ°å†…æ ¸æ€å»åŠ è½½ç£ç›˜é‡Œé¢çš„æ•°æ®</p><p>2ã€åœ¨å¢åˆ æ”¹çš„æ—¶å€™æ˜¯æœ‰äº‹åŠ¡çš„ï¼Œå¦‚æœæ¯æ¬¡éƒ½æ˜¯å°†æ•°æ®å†™å…¥ç£ç›˜è¿›è¡Œå†…æ ¸æ€çš„åˆ‡æ¢ï¼Œé‚£ä¹ˆè¿™æ ·æ•ˆç‡å°±ä¸é«˜ã€‚è¿™ä¸ªæ—¶å€™æœ‰äº†Buffer Poolå°±å¯ä»¥åœ¨é‡Œé¢è¿›è¡Œæ›´æ–°æ“ä½œä¹‹åå°±å“åº”å®Œæˆäº‹åŠ¡ï¼Œä½†æ˜¯æ­¤æ—¶ buffer pool é‡Œé¢çš„æ•°æ®ç§°ä¸ºè„é¡µï¼ˆæ²¡æœ‰åˆ·æ–°åˆ°ç£ç›˜çš„æ•°æ®ï¼‰ç„¶å Mysql é€šè¿‡å„ç§æœºåˆ¶å°†æ•°æ®åŒæ­¥åˆ°ç£ç›˜å°±å¯ä»¥äº†ã€‚</p><p>ä¸Šé¢çš„ç¬¬äºŒç‚¹å¦‚æœä¸åŠæ—¶åŒæ­¥ï¼Œæ•°æ®åº“æ–­ç”µå†…å­˜é‡Œé¢çš„æ•°æ®å°±ä¼šæ¶ˆå¤±ï¼Œå°±ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´ã€‚è¿™ä¸ªæ—¶å€™å°±ä¼šæœ‰ redo log æ¥è§£å†³æ–­ç”µçš„é—®é¢˜ã€‚</p><h3 id="_2-2-åŒå†™ç¼“å†²åŒº" tabindex="-1"><a class="header-anchor" href="#_2-2-åŒå†™ç¼“å†²åŒº" aria-hidden="true">#</a> 2.2 åŒå†™ç¼“å†²åŒº</h3><p>Double write Bufferï¼šåŒå†™ç¼“å†²åŒºçš„ä½œç”¨ä¸»è¦æ˜¯è§£å†³åœ¨ buffer pool å¾€ç£ç›˜å†™æ•°æ®çš„æ—¶å€™ï¼Œç”±äºæ˜¯éšæœºå†™ä¸€é¡µçš„æ•°æ®å¯èƒ½æœ‰éƒ¨åˆ†å†™æˆåŠŸäº†ï¼Œéƒ¨åˆ†æ²¡æœ‰å†™æˆåŠŸã€‚è¿™ä¸ªæ—¶å€™æœ‰äº† Double write Buffer å°±å¯ä»¥åœ¨é‡å¯æœåŠ¡çš„æ—¶å€™é€šè¿‡ Double write Buffer æ¢å¤æ•°æ®ã€‚å…·ä½“åšæ³•å¦‚ä¸‹ï¼š</p><p>1ã€åœ¨ Buffer Poolå¾€ç£ç›˜å†™çš„æ—¶å€™å…ˆå°†æ•°æ®å†™å…¥ç£ç›˜çš„ Double write Buffer é‡Œé¢ã€‚ç”±äºæ˜¯é¡ºåºå†™å…¥ï¼Œæ•ˆç‡é«˜</p><p>2ã€åœ¨ Double write Buffer å†™å®Œä¹‹åï¼Œåœ¨è®²æ•°æ®éšæœºå†™å…¥ç£ç›˜ã€‚æ­¤æ—¶å¦‚æœå†™å®Œåˆ™æ¸…ç©ºDouble write Bufferã€‚</p><p>3ã€å¦‚æœå‡ºç°æ–­ç”µæœªå†™å®Œæ•°æ®ï¼Œåœ¨é‡å¯æ—¶é€šè¿‡ Double write Bufer ä¼šé‡æ–°å°†æ•°æ®å†™å…¥ç£ç›˜ï¼Œç¡®ä¿ä¸ä¸¢æ•°æ®</p><h3 id="_2-3-è‡ªé€‚åº”å“ˆå¸Œ" tabindex="-1"><a class="header-anchor" href="#_2-3-è‡ªé€‚åº”å“ˆå¸Œ" aria-hidden="true">#</a> 2.3 è‡ªé€‚åº”å“ˆå¸Œ</h3><p>Adaptive Hash Indexï¼š åœ¨ innodb ä¸­æ˜¯æ²¡æœ‰å“ˆå¸Œæ•°æ®ç»“æ„çš„ï¼Œä½†æ˜¯å¦‚æœå‡ºç°å¾ˆå¤šé«˜é¢‘ç›¸åŒçš„æŸ¥è¯¢ï¼Œè¿™ä¸ªæ—¶å€™ mysql å°±ä¼šæ ¹æ®æŸ¥è¯¢æ¬¡æ•°ã€ç³»ç»Ÿè´Ÿè½½æƒ…å†µã€å®é™…çš„æŸ¥è¯¢æ¨¡å¼ç­‰è¿›è¡Œè‡ªåŠ¨ä¼˜åŒ–ã€‚å°†ç›¸åŒçš„æŸ¥è¯¢è‡ªé€‚åº”ä¸º å“ˆå¸Œï¼Œè¿™æ ·å°±èƒ½æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œé™ä½ç³»ç»Ÿå¼€é”€ã€‚å¦‚æœåœ¨ç³»ç»Ÿè´Ÿè½½é«˜ï¼Œsql è¯­å¥ç›¸åŒæŸ¥è¯¢ä½åˆ™ä¼šåˆ é™¤è‡ªé€‚åº”å“ˆå¸Œã€‚ç›®å‰æ²¡æœ‰å¯ä¿®æ”¹çš„å‚æ•°ï¼Œæ˜¯ mysql è‡ªå·±è¿›è¡Œçš„è‡ªé€‚åº”ä¼˜åŒ–ã€‚</p><h2 id="ä¸‰ã€mysql-è¯­å¥æ‰§è¡Œè¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€mysql-è¯­å¥æ‰§è¡Œè¿‡ç¨‹" aria-hidden="true">#</a> ä¸‰ã€Mysql è¯­å¥æ‰§è¡Œè¿‡ç¨‹</h2><h3 id="_2-1-æŸ¥è¯¢è¯­å¥" tabindex="-1"><a class="header-anchor" href="#_2-1-æŸ¥è¯¢è¯­å¥" aria-hidden="true">#</a> 2.1 æŸ¥è¯¢è¯­å¥</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>1ã€åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç¼“å­˜ï¼Œé«˜ç‰ˆæœ¬å·²åºŸå¼ƒ
2ã€è¯­æ³•è§£æå™¨
3ã€sql ä¼˜åŒ–å™¨
4ã€åˆ¤æ–­ buffer é‡Œé¢æ˜¯å¦å­˜åœ¨æ•°æ®
5ã€ä¸å­˜åœ¨æ•°æ®åˆ™ä»ç£ç›˜åŠ è½½æ•°æ®
6ã€åˆ¤æ–­æ˜¯å¦æœ‰ç´¢å¼•ï¼Œæ²¡æœ‰ç´¢å¼•åˆ™å…¨è¡¨æ‰«æ
7ã€æœ‰ç´¢å¼•åˆ™çœ‹æ˜¯å¦æœ‰è¦†ç›–ç´¢å¼•ï¼Œæœ‰åˆ™é€šè¿‡ç´¢å¼•æŸ¥è¯¢æ•°æ®åè¿”å›
8ã€æ²¡æœ‰åˆ™é€šè¿‡ç´¢å¼•æŸ¥è¯¢åˆ°ä¸»é”®åè¿›è¡Œå›è¡¨æ“ä½œ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-å¢åˆ æ”¹è¯­å¥" tabindex="-1"><a class="header-anchor" href="#_2-2-å¢åˆ æ”¹è¯­å¥" aria-hidden="true">#</a> 2.2 å¢åˆ æ”¹è¯­å¥</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>1ã€ä»è¿æ¥æ± é‡Œé¢å¤ç”¨çº¿ç¨‹
2ã€sql æ¥å£è¿›è¡Œ sql çš„æ ¼å¼æ£€æŸ¥å’Œé¢„å¤„ç†
3ã€è¯­æ³•è§£æå™¨å°† sql è§£ææœªè§£ææ ‘
4ã€é€šè¿‡è§£ææ ‘è¿›è¡Œ sql ä¼˜åŒ–ï¼Œæ‰¾åˆ°åˆé€‚çš„ç´¢å¼•ï¼Œéƒ¨åˆ† sql è¯­æ³•ä¼˜åŒ–ç­‰
5ã€æ‰§è¡Œå™¨è¿›è¡Œå…·ä½“çš„æ‰§è¡Œ
 - è®°å½•ä¿®æ”¹å‰çš„æ•°æ®åˆ° undo.logï¼Œç”¨æˆ·äº‹åŠ¡å›æ»šæ“ä½œ
 - æ›´æ–°æ•°æ®åˆ° buffer poolï¼Œæ•°æ®ä¸ä¼šç«‹å³åˆ·æ–°åˆ°ç£ç›˜
 - è®°å½•æ•°æ®åˆ° redo.logç”¨æˆ·æ•°æ®åº“å´©æºƒæ¢å¤æ•°æ®
 - è®°å½• binlogæ•°æ®ï¼Œç”¨äºåŒæ­¥æ•°æ®ç­‰æ“ä½œ
6ã€å“åº”æ•°æ®æ“ä½œ
7ã€å¼‚æ­¥çº¿ç¨‹è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œå°†buffer pool é‡Œé¢çš„æ•°æ®åŒæ­¥åˆ°ç£ç›˜
 - å…ˆå°† buffer pool åŒæ­¥åˆ° double write bufferã€‚é˜²æ­¢éšæœºå†™ä¸­æ–­
 - å°† double write buffer çš„æ•°æ®å†™å…¥ç£ç›˜åæ¸…ç©º double write bufferã€‚
 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å››ã€äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#å››ã€äº‹åŠ¡" aria-hidden="true">#</a> å››ã€äº‹åŠ¡</h2><h3 id="_4-1-acid" tabindex="-1"><a class="header-anchor" href="#_4-1-acid" aria-hidden="true">#</a> 4.1 ACID</h3><p>å­˜åœ¨äº‹åŠ¡å°±ä¼šæœ‰äº‹åŠ¡çš„å››ä¸ªç‰¹å¾ ACIDï¼Œå¦‚ä¸‹ï¼š</p><p>Atomicity(åŸå­æ€§)ï¼šè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥</p><p>Consistency(ä¸€è‡´æ€§)ï¼šäº‹åŠ¡æ‰§è¡Œçš„å‰åï¼Œæ•°æ®éƒ½æ˜¯ä¸€è‡´çš„ã€‚æ¯”å¦‚è½¬è´¦ä¸€ä¸ªå¤š10 å…ƒä¸€ä¸ªå°‘ 10 å…ƒã€‚</p><p>Isolation(éš”ç¦»æ€§): ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸è¢«å¦ä¸€ä¸ªäº‹åŠ¡å¹²æ‰°</p><p>Durability(æŒä¹…æ€§): ä¸€æ—¦äº‹åŠ¡æäº¤æ•°æ®å°±è¢«æ°¸ä¹…ä¿®æ”¹ï¼Œå³ä½¿æ•°æ®åº“å´©æºƒ</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>åŸå­æ€§ï¼šè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚é‡åšæ—¥å¿—ï¼ˆRedo Logï¼‰ã€å›æ»šæ—¥å¿—ï¼ˆUndo Logï¼‰
ä¸€è‡´æ€§: ä¸šåŠ¡é€»è¾‘ä¸€è‡´ï¼Œçº¦æŸæ£€æŸ¥ã€è§¦å‘å™¨å’Œå­˜å‚¨è¿‡ç¨‹
éš”ç¦»æ€§: å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œäº’ä¸å½±å“ mvccã€é”æœºåˆ¶ï¼ˆå…±äº«é”ã€æ„å‘é”ã€æ’ä»–é”ï¼‰
æŒä¹…æ€§ï¼šæ“ä½œæ–­ç”µåèƒ½æ¢å¤ é‡åšæ—¥å¿—ï¼ˆRedo Logï¼‰ã€åŒå†™ç¼“å†²åŒºï¼ˆDoublewrite Bufferï¼‰
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹æ•°æ®çš„æ—¶å€™å°±ä¼šæœ‰å¦‚ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p><table><thead><tr><th style="text-align:left;">åè¯</th><th>ç°è±¡</th></tr></thead><tbody><tr><td style="text-align:left;">è„è¯»</td><td>ä¿®æ”¹æ•°æ®åæœªæäº¤ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡è¯»å–äº†æäº¤å‰çš„æ•°æ®</td></tr><tr><td style="text-align:left;">ä¸å¯é‡å¤è¯»</td><td>åŒä¸€ä¸ªäº‹åŠ¡é‡Œé¢è¯»å–åŒä¸€ä¸ªæ•°æ®ï¼Œå‡ºç°ä¸ä¸€æ ·çš„æƒ…å†µ</td></tr><tr><td style="text-align:left;">å¹»è¯»</td><td>è¯»å–æ•°æ®æ—¶ï¼Œå…¶ä»–äº‹åŠ¡æ’å…¥æ•°æ®ã€‚å†æ¬¡è¯»æ•°æ®ä¸ä¸€è‡´</td></tr></tbody></table><h3 id="_4-2-mvcc" tabindex="-1"><a class="header-anchor" href="#_4-2-mvcc" aria-hidden="true">#</a> 4.2 MVCC</h3><p>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œåˆ©ç”¨å¤šä¸ªäº‹åŠ¡ç‰ˆæœ¬æœºåˆ¶å®ç°ï¼ˆä¹è§‚é” + redo logï¼‰é¿å…äº†åŠ é”æ“ä½œã€‚åœ¨åŒä¸€äº‹åŠ¡ä¸­åˆ©ç”¨read viewæŸ¥è¯¢ä¹‹å‰çš„æ•°æ®ã€‚</p><table><thead><tr><th>äº‹åŠ¡è¯»å–å¯æ€§é—®é¢˜</th><th>ç¬¬ä¸€æ¬¡å¿«ç…§è¯»</th><th>åé¢çš„å¿«ç…§è¯»</th><th>åŸå› ï¼ˆread viewç”Ÿæˆæ—¶æœºï¼‰</th></tr></thead><tbody><tr><td>RR</td><td>å¯è§</td><td>ä¸å¯è§</td><td>ç¬¬ä¸€æ¬¡å¿«ç…§è¯»ç”Ÿæˆä¹‹åå¤ç”¨</td></tr><tr><td>RC</td><td>å¯è§</td><td>å¯è§</td><td>æ¯æ¬¡å¿«ç…§è¯»éƒ½ç”Ÿæˆ</td></tr></tbody></table><ul><li>å¿«ç…§è¯»ï¼šè¯»å†™å†²çªä¸åŠ é”ï¼Œè¯»å–çš„æ˜¯å†å²ç‰ˆæœ¬æ•°æ®ã€‚å¦‚Select â€¦</li><li>å½“å‰è¯»ï¼šåŠ é”æ“ä½œï¼ˆæ‚²è§‚é”ï¼‰ï¼Œè¯»å–çš„æ˜¯æœ€æ–°ç‰ˆæœ¬æ•°æ®ã€‚å¦‚ï¼šselect â€¦ lock in share mode / Select â€¦. For update / Update/delete/insert</li></ul><p>ä¸ºäº†è§£å†³ ACIDçš„é—®é¢˜ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•ã€‚ä¸€ä¸ªæ˜¯ç›´æ¥åŠ æ‚²è§‚é”ï¼Œæ¯æ¬¡ä¿®æ”¹æ—¶éƒ½é”ä½è¿™ç§æ–¹å¼æ€§èƒ½æœ€ä¸å¥½ã€‚å¦å¤–ä¸€ä¸ªå°±æ˜¯ä¹è§‚é”ï¼Œåˆ©ç”¨ç‰ˆæœ¬çš„æ–¹å¼ã€‚mysql çš„å¼€å‘è€…ä¸ºäº†æé«˜æ€§èƒ½äºæ˜¯è®¾è®¡äº† MVCCï¼ˆå¤šå¹¶å‘ç‰ˆæœ¬æ§åˆ¶ï¼‰ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è§£å†³å¤šå¹¶å‘åŠ é”å¤ªé‡çš„ä¸€ä¸ªæ–¹å¼ã€‚åšåˆ°è¯»å†™å†²çªæ—¶ï¼Œä¸åŠ é”ä¹Ÿä¸é˜»å¡ã€‚</p><p>MVCC æœ€ä¸»è¦çš„å°±æ˜¯åˆ©ç”¨ undo log å»è®°å½•å›æ»šæ—¥å¿—ï¼Œç”¨å›æ»šæ—¥å¿—é‡Œé¢çš„äº‹åŠ¡ id åŠ ä¸Šå½“å‰äº‹åŠ¡è¯»å–çš„ä¿¡æ¯è¿›è¡Œåˆ¤æ–­ã€‚å…·ä½“ Mysqlå¯è§æ€§ç®—æ³•ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><p><strong>MVCCé‡è¦çš„ä¸‰ä¸ªæ¦‚å¿µ: éšå¼å­—æ®µã€undo logã€read view</strong></p><ul><li>éšå¼å­—æ®µï¼š é™¤äº†è‡ªå®šä¹‰çš„å­—æ®µå¤–ï¼Œæ•°æ®åº“éšå¼çš„å®šä¹‰äº†å…¶ä»–å­—æ®µ</li></ul><table><thead><tr><th>DB_ROW_ID</th><th>éšå¼ä¸»é”®</th></tr></thead><tbody><tr><td>DB_TRX_ID(trx_id)</td><td>å½“å‰äº‹åŠ¡ID(é€’å¢)</td></tr><tr><td>DB_ROLL_PTR</td><td>å›æ»šæŒ‡é’ˆ</td></tr></tbody></table><ul><li>Undo log: åœ¨è®°å½•æ—¥å¿—çš„æ—¶å€™äº‹åŠ¡IDé€’å¢åå›æ»šæŒ‡é’ˆæŒ‡å‘ä¸Šä¸€ä¸ªç‰ˆæœ¬</li><li>Read View: åœ¨äº‹åŠ¡æ‰§è¡Œå¿«ç…§è¯»çš„ä¸€åˆ»ä¼šç”Ÿæˆæ•°æ®åº“ç³»ç»Ÿçš„å¿«ç…§</li></ul><table><thead><tr><th>trx_list</th><th>è®°å½•æ´»è·ƒäº‹åŠ¡ID</th></tr></thead><tbody><tr><td>up_limit_id</td><td>äº‹åŠ¡åˆ—è¡¨æœ€å°ID</td></tr><tr><td>low_limit_id</td><td>å°šæœªåˆ†é…ID(æœ€å¤§ID+1)</td></tr></tbody></table><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// å¿«ç…§è¯»æ‰€éœ€çš„ ReadView ç±»</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ReadView</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ›å»ºè¯¥ ReadView çš„äº‹åŠ¡ ID</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> creator_trx_id<span class="token punctuation">;</span>
    <span class="token comment">// æ­£åœ¨æ´»è·ƒçš„äº‹åŠ¡ ID åˆ—è¡¨ï¼ˆæœªæäº¤çš„äº‹åŠ¡ï¼Œå‡åºåˆ—è¡¨ï¼‰</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> trx_list<span class="token punctuation">;</span>
    <span class="token comment">// å½“å‰ç³»ç»Ÿä¸­å°šæœªåˆ†é…çš„ä¸‹ä¸€ä¸ªäº‹åŠ¡ IDï¼Œå³å¤§äº alive_list ä¸­æ‰€æœ‰äº‹åŠ¡ ID çš„æœ€å°å€¼</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> low_limit_id<span class="token punctuation">;</span>
    <span class="token comment">// alive_list ä¸­çš„æœ€å°äº‹åŠ¡ ID</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> up_limit_id<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// UndoLog ç±»ï¼Œç”¨äºå­˜å‚¨å›æ»šæ—¥å¿—ä¿¡æ¯</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">UndoLog</span> <span class="token punctuation">{</span>
    <span class="token comment">// å½“å‰æŒ‡é’ˆï¼ˆå¯ç”¨äºå…¶ä»–æ“ä½œï¼Œæ­¤å¤„ä¿ç•™ï¼‰</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> roll_ptr<span class="token punctuation">;</span>
    <span class="token comment">// éšå«çš„è‡ªå¢ ID</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> db_row_id<span class="token punctuation">;</span>
    <span class="token comment">// ä¿®æ”¹è¯¥è¡Œæ•°æ®çš„äº‹åŠ¡ ID</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> trx_id<span class="token punctuation">;</span>
    <span class="token comment">// å›æ»šæŒ‡é’ˆï¼ŒæŒ‡å‘å‰ä¸€ä¸ªç‰ˆæœ¬çš„ UndoLog</span>
    <span class="token keyword">public</span> <span class="token class-name">UndoLog</span> db_roll_ptr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¿«ç…§è¯»æ–¹æ³•ï¼Œç”¨äºä» UndoLog é“¾ä¸­æŸ¥æ‰¾å¯è§çš„æ•°æ®ç‰ˆæœ¬</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">UndoLog</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token class-name">UndoLog</span> chain<span class="token punctuation">,</span> <span class="token class-name">ReadView</span> readView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">UndoLog</span> current <span class="token operator">=</span> chain<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>current <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">visibility</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> readView<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> current<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// ç§»åŠ¨åˆ°å‰ä¸€ä¸ªç‰ˆæœ¬çš„ UndoLog</span>
        current <span class="token operator">=</span> current<span class="token punctuation">.</span>db_roll_ptr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¯è§æ€§åˆ¤æ–­æ–¹æ³•ï¼Œåˆ¤æ–­æŸæ¡ UndoLog è®°å½•å¯¹å½“å‰ ReadView æ˜¯å¦å¯è§</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">visibility</span><span class="token punctuation">(</span><span class="token class-name">UndoLog</span> undoLog<span class="token punctuation">,</span> <span class="token class-name">ReadView</span> readView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> trxId <span class="token operator">=</span> undoLog<span class="token punctuation">.</span>trx_id<span class="token punctuation">;</span>
    <span class="token comment">// æƒ…å†µä¸€ï¼šäº‹åŠ¡åœ¨ ReadView åˆ›å»ºå‰å·²æäº¤</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>trxId <span class="token operator">&lt;</span> readView<span class="token punctuation">.</span>up_limit_id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æƒ…å†µäºŒï¼šäº‹åŠ¡æ˜¯å½“å‰äº‹åŠ¡è‡ªå·±ä¿®æ”¹çš„</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>trxId <span class="token operator">==</span> readView<span class="token punctuation">.</span>creator_trx_id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æƒ…å†µä¸‰ï¼šäº‹åŠ¡åœ¨ ReadView åˆ›å»ºåå¼€å§‹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>trxId <span class="token operator">&gt;=</span> readView<span class="token punctuation">.</span>low_limit_id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æƒ…å†µå››ï¼šäº‹åŠ¡åœ¨ ReadView åˆ›å»ºæ—¶æ´»è·ƒï¼Œåˆ¤æ–­æ˜¯å¦å·²æäº¤</span>
    <span class="token keyword">return</span> <span class="token operator">!</span>readView<span class="token punctuation">.</span>trx_list<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>trxId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ · mysql å°±ç”¨äº†äº‹åŠ¡çš„éš”ç¦»çº§åˆ«è§£å†³äº†å¤šçº¿ç¨‹å¹¶å‘è¯»å†™å†²çªçš„é—®é¢˜ã€‚</p><table><thead><tr><th>äº‹ç‰©çº§åˆ«</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th><th></th></tr></thead><tbody><tr><td>read uncommitted</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>ä¼šè¯»å–å›æ»šæ•°æ®</td></tr><tr><td>read committed</td><td>âŒ</td><td>âœ… å½“å‰è¯»</td><td>âœ…</td><td>mvccå¿«ç…§è¯»æœ€æ–°</td></tr><tr><td>repeatable read</td><td>âŒ</td><td>âŒ å¿«ç…§è¯»</td><td>âœ… mvcc ä¸ å¿«ç…§è¯»+é—´éš™é”å¯è§£å†³</td><td>mvccå¤ç”¨å¿«ç…§è¯»</td></tr><tr><td>serialize</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>åŠ é”</td></tr></tbody></table><p>Oracleé»˜è®¤éš”ç¦»çº§åˆ«ä¸ºread committedï¼Œ Msqlé»˜è®¤ä¸ºrepeatable readã€‚ç”Ÿäº§ä¼šå°†éš”ç¦»çº§åˆ«æ”¹ä¸ºread committedï¼Œå³å¯ä»¥å‡ºç°ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ï¼Œè¿™æ ·åœ¨äº‹åŠ¡ä¸­å°±å¯ä»¥è·å–æœ€æ–°çš„æ•°æ®ã€‚</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>## æŸ¥è¯¢æ•°æ®åº“å½“å‰é»˜è®¤éš”ç¦»çº§åˆ«
SELECT @@transaction_isolation;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-rrä¸‹çš„å¹»è¯»" tabindex="-1"><a class="header-anchor" href="#_4-3-rrä¸‹çš„å¹»è¯»" aria-hidden="true">#</a> 4.3 RRä¸‹çš„å¹»è¯»</h3><table><thead><tr><th style="text-align:left;"><strong>åœºæ™¯</strong></th><th style="text-align:left;"><strong>æ˜¯å¦å¯èƒ½å‘ç”Ÿå¹»è¯»</strong></th><th style="text-align:left;"><strong>åŸå› </strong></th></tr></thead><tbody><tr><td style="text-align:left;">çº¯å¿«ç…§è¯»ï¼ˆæ™®é€š SELECTï¼‰</td><td style="text-align:left;">âŒ ä¸ä¼š</td><td style="text-align:left;">MVCC ä¿è¯ä¸€è‡´æ€§è§†å›¾</td></tr><tr><td style="text-align:left;">çº¯å½“å‰è¯»ï¼ˆSELECT FOR UPDATEï¼‰</td><td style="text-align:left;">âŒ ä¸ä¼š</td><td style="text-align:left;">Next-Key Locking é˜»æ­¢æ’å…¥</td></tr><tr><td style="text-align:left;">æ··åˆå¿«ç…§è¯» + å½“å‰è¯»</td><td style="text-align:left;">âœ… å¯èƒ½</td><td style="text-align:left;">å½“å‰è¯»ä¼šé‡æ–°åŠ é”å¹¶çœ‹åˆ°æœ€æ–°æ•°æ®</td></tr><tr><td style="text-align:left;">æ— ç´¢å¼•æŸ¥è¯¢</td><td style="text-align:left;">âŒ ä¸ä¼š</td><td style="text-align:left;">å…¨è¡¨é”é˜»æ­¢æ’å…¥ï¼Œä½†æ€§èƒ½æå·®</td></tr></tbody></table><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>åœ¨ MySQL çš„ RR éš”ç¦»çº§åˆ«ä¸‹ï¼Œåªæœ‰çº¯å¿«ç…§è¯»ï¼ˆæ— å†™æ“ä½œï¼‰ä¸”æ­£ç¡®ä½¿ç”¨é—´éš™é”æ—¶æ‰èƒ½å®Œå…¨é¿å…å¹»è¯»ã€‚è‹¥æ¶‰åŠå†™æ“ä½œã€æœªæ­£ç¡®åŠ é”æˆ–ç´¢å¼•è®¾è®¡ä¸å½“ï¼Œä»å¯èƒ½å‘ç”Ÿå¹»è¯»ã€‚å½»åº•é¿å…å¹»è¯»éœ€ï¼š
	- å¯¹èŒƒå›´æŸ¥è¯¢ä½¿ç”¨ SELECT ... FOR UPDATE æ˜¾å¼åŠ é”ã€‚
	- å‡çº§è‡³ Serializable éš”ç¦»çº§åˆ«ï¼ˆç‰ºç‰²å¹¶å‘æ€§èƒ½ï¼‰ã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="äº”ã€ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#äº”ã€ç´¢å¼•" aria-hidden="true">#</a> äº”ã€ç´¢å¼•</h2><p>æ•°æ®è®°å½•çš„æ•°æ®é‡çº§å¢å¤šåï¼Œå¦‚æœæ˜¯æŒ¨ä¸ªæŸ¥è¯¢çš„æ•ˆç‡å°±å¾ˆä½äº†ã€‚è¿™æ—¶å€™ä¸ºäº†å¿«é€ŸæŸ¥æ‰¾ï¼Œå°±åƒä¸€æœ¬ä¹¦çš„ç›®å½•ä¸€æ ·ä¼šç»™æ•°æ®å»ºç«‹ç´¢å¼•ã€‚ç´¢å¼•å»ºç«‹ä¹‹åå°±èƒ½å¿«é€Ÿçš„å®šä½æ•°æ®ã€‚Mysql çš„ç´¢å¼•æ˜¯ä½¿ç”¨çš„B+Tree å®ç°çš„ï¼Œæ™®é€šèŠ‚ç‚¹è®°å½•ç´¢å¼•æ•°æ®ï¼Œå¶å­èŠ‚ç‚¹è®°å½•å…·ä½“çš„æ•°æ®ã€‚</p><p>Mysql ä¸­å¦‚æœå®šä¹‰äº†ä¸»é”®ï¼Œå°±ä¼šæŠŠä¸»é”®ä½œä¸ºé»˜è®¤çš„èšç°‡ç´¢å¼•ï¼Œèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å°±è®°å½•äº†æ‰€æœ‰çš„æ•°æ®ã€‚åœ¨åˆ›å»ºæ™®é€šç´¢å¼•çš„æ—¶å€™æ˜¯æŒ‰ç…§åˆ›å»ºçš„å­—æ®µè¿›è¡Œç´¢å¼•çš„ï¼Œç´¢å¼•çš„æŒ‡é’ˆæ˜¯æŒ‡å‘èšç°‡ç´¢å¼•çš„ä½ç½®ã€‚å¦‚æœæ™®é€šç´¢å¼•æŸ¥è¯¢çš„å­—æ®µä¸æ˜¯æ™®é€šç´¢å¼•çš„å­—æ®µï¼ˆè¦†ç›–ç´¢å¼•ï¼‰è¿™æ—¶å€™å°±éœ€è¦è¿›è¡Œå›è¡¨æ“ä½œï¼Œä¹Ÿå°±æ˜¯å…ˆé€šè¿‡æ™®é€šç´¢å¼•æ‰¾åˆ°èšç°‡ç´¢å¼•çš„å€¼ï¼Œåœ¨é€šè¿‡èšç°‡ç´¢å¼•æ‰¾åˆ°å…·ä½“çš„æ•°æ®ã€‚</p><p>é‚£ä¹ˆä¼˜åŒ–æŸ¥è¯¢è¯­å¥çš„æ—¶å€™ï¼Œå°±éœ€è¦ä»å»ºç«‹åˆé€‚çš„ç´¢å¼•+æŸ¥è¯¢è¯­å¥ä½¿ç”¨ç´¢å¼•çš„æ–¹å‘å»ä¼˜åŒ–ã€‚</p><table><thead><tr><th>åè¯è§£é‡Š</th><th>æè¿°</th><th>å­˜å‚¨å¼•æ“</th></tr></thead><tbody><tr><td>èšç°‡ç´¢å¼•</td><td>ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®å­˜æ”¾åœ¨ä¸€èµ·</td><td>innodb</td></tr><tr><td>éèšç°‡ç´¢å¼•</td><td>ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ²¡æœ‰å­˜æ”¾åœ¨ä¸€èµ·</td><td>myisamã€innodb</td></tr><tr><td>å›è¡¨</td><td>è·å–æ‰€æœ‰æ•°æ®æ—¶å€™å…ˆé€šè¿‡æ™®é€šç´¢å¼•æŸ¥è¯¢ï¼Œåé€šè¿‡ä¸»é”®ç´¢å¼•</td><td></td></tr><tr><td>è¦†ç›–ç´¢å¼•</td><td>æ™®é€šç´¢å¼•å°±åŒ…å«æŸ¥è¯¢çš„å€¼</td><td></td></tr><tr><td>ç´¢å¼•ä¸‹æ¨</td><td>ä»serverç«¯çš„æŸ¥è¯¢ä¸‹æ¨åˆ°å­˜å‚¨å¼•æ“</td><td></td></tr><tr><td>é¡µåˆ†è£‚</td><td>b+æ ‘æ’å…¥æ•°æ®ï¼Œå¶å­èŠ‚ç‚¹ä¸å¤Ÿæ—¶</td><td></td></tr><tr><td>é¡µåˆå¹¶</td><td>b+æ ‘åˆ é™¤æ•°æ®æ—¶</td><td></td></tr></tbody></table><h3 id="_5-1-ç´¢å¼•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_5-1-ç´¢å¼•ç»“æ„" aria-hidden="true">#</a> 5.1 ç´¢å¼•ç»“æ„</h3><table><thead><tr><th></th><th>B+Tree</th><th>Hash</th></tr></thead><tbody><tr><td>ç»“æ„</td><td>æœ‰åºæ ‘ç»“æ„</td><td>K,væ•£åˆ—hashå€¼</td></tr><tr><td>ç¼ºç‚¹</td><td>å†—ä½™èŠ‚ç‚¹æ•°æ®å ç”¨å†…å­˜</td><td>æ— æ³•æ¯”è¾ƒå¤§å°ï¼Œä¸èƒ½èŒƒå›´æŸ¥è¯¢</td></tr><tr><td>æ’åº</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>å¤§å°åŒ¹é…</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ(hashç®—æ³•åä¸è¿ç»­)</td></tr><tr><td>æœ€å·¦å‰ç¼€åŒ¹é…</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>ç­‰å€¼æŸ¥æ‰¾</td><td>æ•ˆç‡ä¸€èˆ¬</td><td>æ•ˆç‡é«˜</td></tr></tbody></table><p>Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ«</p><p>å­˜å‚¨æ•°æ®ï¼š</p><p>Bæ ‘ï¼šä¸å­˜åœ¨é‡å¤æ•°æ®</p><p>B+æ ‘ï¼šç´¢å¼•åˆ—åªå­˜keyï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨keyå’Œæ•°æ®</p><h3 id="_5-2-ç´¢å¼•åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#_5-2-ç´¢å¼•åˆ†ç±»" aria-hidden="true">#</a> 5.2 ç´¢å¼•åˆ†ç±»</h3><ul><li>é€»è¾‘è§’åº¦</li></ul><table><thead><tr><th>ä¸»é”®ç´¢å¼•</th><th>å»ºç«‹çš„ä¸»é”®å”¯ä¸€</th></tr></thead><tbody><tr><td>å”¯ä¸€ç´¢å¼•</td><td>ä¸€èˆ¬ç»™ä¸šåŠ¡å”¯ä¸€æ•°æ®å»ºç«‹</td></tr><tr><td>æ™®é€šç´¢å¼•</td><td>ä¸å”¯ä¸€çš„æ•°æ®ä½œä¸ºæ£€ç´¢æ¡ä»¶</td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>æ–‡æœ¬å…³é”®å­—æ—¶ï¼Œä¸€èˆ¬ç”¨es</td></tr><tr><td>ç»„åˆç´¢å¼•</td><td>å¤šä¸ªå­—æ®µä½œä¸ºæ£€ç´¢æ¡ä»¶</td></tr></tbody></table><ul><li>ç‰©ç†å­˜å‚¨è§’åº¦</li></ul><table><thead><tr><th>èšç°‡ç´¢å¼•</th><th>ç´¢å¼•å’Œæ•°æ®åœ¨ä¸€ä¸ªæ–‡ä»¶</th><th>InnoDBçš„ä¸»é”®ä½¿ç”¨çš„å°±æ˜¯èšç°‡ç´¢å¼•</th></tr></thead><tbody><tr><td>éèšç°‡ç´¢å¼•</td><td>ç´¢å¼•å’Œæ•°æ®åˆ†å¼€å­˜æ”¾</td><td>MyISAMä¸ç®¡æ˜¯ä¸»é”®è¿˜æ˜¯äºŒçº§ç´¢å¼•éƒ½æ˜¯ä½¿ç”¨çš„éèšç°‡ç´¢å¼•</td></tr></tbody></table><ul><li>æ•°æ®ç»“æ„</li></ul><table><thead><tr><th>treeï¼ˆb treeï¼Œb+treeï¼‰å¸¸ç”¨</th><th>é€‚ç”¨äºæŸ¥æ‰¾èŒƒå›´å†…æ•°æ®</th></tr></thead><tbody><tr><td>hashï¼ˆhashç´¢å¼•ï¼‰</td><td>é€‚ç”¨äºéšæœºè®¿é—®åœºåˆ</td></tr><tr><td>full-textï¼ˆå…¨æ–‡ç´¢å¼•ï¼‰</td><td>æŸ¥æ‰¾é—®é¢˜ä¸­å…³é”®å­—ï¼Œä¸€èˆ¬ç”¨ES</td></tr><tr><td>R-treeï¼ˆç©ºé—´ç´¢å¼•ï¼‰ä¸å¸¸ç”¨</td><td>æŸ¥è¯¢æ¯”è¾ƒæ¥è¿‘çš„æ•°æ®GISä¸å®Œå–„</td></tr></tbody></table><h3 id="_5-3-é€‰æ‹©åˆé€‚çš„ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_5-3-é€‰æ‹©åˆé€‚çš„ç´¢å¼•" aria-hidden="true">#</a> 5.3 é€‰æ‹©åˆé€‚çš„ç´¢å¼•</h3><p>æŸ¥è¯¢é‡å¤§çš„åˆ›å»ºç´¢å¼•</p><ul><li>é«˜é¢‘è®¿é—®çš„æ•°æ®ï¼šæ¯”å¦‚è®¢å•è¡¨é€šè¿‡è®¢å•å·æŸ¥è¯¢æ•°æ®ï¼Œè¿™æ—¶å€™ç»™è®¢å•å·åŠ ç´¢å¼•ã€‚è®¢å•å·ä¸€èˆ¬éƒ½æ˜¯ä¸»é”®ç´¢å¼•</li><li>æŸ¥è¯¢èŒƒå›´é‡å¤§çš„æ•°æ®ï¼šæ¯”å¦‚ç»å¸¸å‡ºç°é€šè¿‡æ—¶é—´èŒƒå›´æŸ¥è¯¢æ•°æ®ï¼Œé€ æˆæ…¢æŸ¥è¯¢ç­‰æ€§èƒ½é—®é¢˜ï¼Œç»™æ—¶é—´åŠ ä¸ªç´¢å¼•</li></ul><p>é€‰æ‹©åˆé€‚çš„åˆ—</p><ul><li>åŸºæ•°é«˜çš„åˆ—ï¼šç”¨æˆ· id ä¸é‡å¤é€‚åˆåŠ ç´¢å¼•ï¼Œæ€§åˆ«åªæœ‰ä¸¤ä¸ªä¸é€‚åˆåŠ ç´¢å¼•</li><li>ç”¨äºå…³è”æŸ¥è¯¢è¿æ¥çš„å­—æ®µï¼šæ¯”å¦‚ a left join b on a.user_id = b.user_id ç»™ user_id å»ºç«‹ç´¢å¼•</li><li>æ’åºåˆ†ç»„çš„åˆ—ï¼šç»å¸¸æœ‰ sql è¿›è¡Œ group by æ“ä½œã€‚group by åé¢å¾—å­—æ®µå¯ä»¥åŠ ç´¢å¼•ï¼Œå¯åŠ å¿«åˆ†ç»„é€Ÿåº¦</li></ul><p>é¿å…ä¸åˆé€‚çš„ç´¢å¼•</p><ul><li>å·²æœ‰è”åˆç´¢å¼•ï¼šå·²ç»æœ‰äº† index(a, b)è¿˜åˆ›å»ºä¸€ä¸ª index(a)</li><li>ä¸ºæ¯ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ï¼šç´¢å¼•åˆ›å»ºåï¼Œå¢åˆ æ”¹çš„æ•ˆç‡å°±å¾ˆä½ã€‚ä¸ºäº†æŸ¥è¯¢æ•ˆç‡é«˜å®Œå…¨ä¸è€ƒè™‘å¢åˆ æ”¹æ˜¯ä¸å¯¹çš„</li></ul><p>ç´¢å¼•çš„ç±»å‹é€‰æ‹©</p><ul><li>B+ Tree: Mysql çš„é»˜è®¤ç´¢å¼•ç±»å‹ï¼Œæ”¯æŒèŒƒå›´æŸ¥è¯¢ã€åˆ†ç»„ã€æ’åº</li><li>å“ˆå¸Œç´¢å¼•ï¼šæŸ¥è¯¢æ•ˆç‡æé«˜ï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ã€æ’åºå’Œåˆ†ç»„, ä¸€èˆ¬ç”¨ redis ç¼“å­˜å®ç°</li><li>å…¨æ–‡ç´¢å¼•ï¼šæ£€ç´¢åšå®¢é‡Œé¢çš„æ–‡æœ¬æ•°æ®æ—¶ï¼Œä¸€èˆ¬ç”¨çš„æ˜¯ Elasticsearch</li></ul><h3 id="_5-4-é¿å…ç´¢å¼•å¤±æ•ˆ" tabindex="-1"><a class="header-anchor" href="#_5-4-é¿å…ç´¢å¼•å¤±æ•ˆ" aria-hidden="true">#</a> 5.4 é¿å…ç´¢å¼•å¤±æ•ˆ</h3><ol><li>é¿å…åœ¨ç´¢å¼•åˆ—ä¸Šè¿›è¡Œè®¡ç®—ã€å‡½æ•°æ“ä½œ</li></ol><ul><li><p><strong>åŸç†</strong>ï¼šå¯¹ç´¢å¼•åˆ—ä½¿ç”¨å‡½æ•°æˆ–è¿›è¡Œè®¡ç®—æ—¶ï¼ŒMySQL æ— æ³•ç›´æ¥ä½¿ç”¨ç´¢å¼•å¿«é€Ÿå®šä½æ•°æ®ï¼Œå› ä¸ºç´¢å¼•æ˜¯åŸºäºåŸå§‹åˆ—å€¼æ„å»ºçš„ï¼Œå‡½æ•°æˆ–è®¡ç®—ä¼šæ”¹å˜ç´¢å¼•åˆ—çš„åŸæœ‰å€¼ï¼Œä½¿ç´¢å¼•å¤±æ•ˆã€‚</p></li><li><p><strong>ç¤ºä¾‹åŠè§£å†³åŠæ³•</strong></p></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- åŸæŸ¥è¯¢ï¼Œç´¢å¼•å¤±æ•ˆ</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span>created_at<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2023</span><span class="token punctuation">;</span>
<span class="token comment">-- ä¼˜åŒ–åï¼Œå¯ä½¿ç”¨ç´¢å¼•</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> created_at <span class="token operator">&gt;=</span> <span class="token string">&#39;2023-01-01&#39;</span> <span class="token operator">AND</span> created_at <span class="token operator">&lt;</span> <span class="token string">&#39;2024-01-01&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>éµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™</li></ol><ul><li><strong>åŸç†</strong>ï¼šå¯¹äºå¤åˆç´¢å¼•ï¼ˆç”±å¤šä¸ªåˆ—ç»„æˆçš„ç´¢å¼•ï¼‰ï¼ŒMySQL ä¼šæŒ‰ç…§ç´¢å¼•ä¸­åˆ—çš„é¡ºåºä¾æ¬¡ä½¿ç”¨åˆ—è¿›è¡ŒæŸ¥è¯¢åŒ¹é…ã€‚å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­ä¸åŒ…å«å¤åˆç´¢å¼•çš„æœ€å·¦åˆ—ï¼Œé‚£ä¹ˆæ•´ä¸ªå¤åˆç´¢å¼•å°†æ— æ³•ä½¿ç”¨ã€‚</li><li>ç¤ºä¾‹åŠè§£å†³åŠæ³•</li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- åˆ›å»ºå¤åˆç´¢å¼•</span>
<span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_name_age <span class="token keyword">ON</span> users <span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- å¯ä½¿ç”¨ç´¢å¼•</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span> <span class="token operator">AND</span> age <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
<span class="token comment">-- å¯ä½¿ç”¨ç´¢å¼•ï¼Œéƒ¨åˆ†åŒ¹é…</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- ç´¢å¼•å¤±æ•ˆï¼Œæœªéµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> age <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>é¿å…ä½¿ç”¨ä¸ç­‰äºï¼ˆ!= æˆ– &lt;&gt;ï¼‰ã€IS NULLã€IS NOT NULL</li></ol><ul><li><strong>åŸç†</strong>ï¼šå½“ä½¿ç”¨ä¸ç­‰äºã€IS NULL æˆ– IS NOT NULL æ—¶ï¼ŒMySQL æ— æ³•æœ‰æ•ˆåˆ©ç”¨ç´¢å¼•è¿›è¡ŒèŒƒå›´æ‰«æï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¨è¡¨æ‰«æã€‚</li><li>ç¤ºä¾‹åŠè§£å†³åŠæ³•</li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- åŸæŸ¥è¯¢ï¼Œç´¢å¼•å¯èƒ½å¤±æ•ˆ</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> products <span class="token keyword">WHERE</span> price <span class="token operator">!=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token comment">-- ä¼˜åŒ–æ€è·¯ï¼Œä½¿ç”¨èŒƒå›´æŸ¥è¯¢ä»£æ›¿ä¸ç­‰äº</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> products <span class="token keyword">WHERE</span> price <span class="token operator">&lt;</span> <span class="token number">100</span> <span class="token operator">OR</span> price <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment">-- åŸæŸ¥è¯¢ï¼Œç´¢å¼•å¯èƒ½å¤±æ•ˆ</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> email <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token comment">-- å¦‚æœä¸šåŠ¡å…è®¸ï¼Œå¯ç»™å­—æ®µè®¾ç½®é»˜è®¤å€¼ï¼Œé¿å…ä½¿ç”¨ IS NULL æŸ¥è¯¢</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>é¿å…éšå¼ç±»å‹è½¬æ¢</li></ol><ul><li><strong>åŸç†</strong>ï¼šå½“æŸ¥è¯¢æ¡ä»¶ä¸­çš„æ•°æ®ç±»å‹ä¸ç´¢å¼•åˆ—çš„æ•°æ®ç±»å‹ä¸ä¸€è‡´æ—¶ï¼ŒMySQL ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</li><li><strong>ç¤ºä¾‹åŠè§£å†³åŠæ³•</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- å‡è®¾ id æ˜¯æ•´æ•°ç±»å‹çš„ç´¢å¼•åˆ—</span>
<span class="token comment">-- åŸæŸ¥è¯¢ï¼Œå­˜åœ¨éšå¼ç±»å‹è½¬æ¢ï¼Œç´¢å¼•å¤±æ•ˆ</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> orders <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token string">&#39;123&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- ä¼˜åŒ–åï¼Œä½¿ç”¨æ­£ç¡®çš„æ•°æ®ç±»å‹</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> orders <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>é¿å…ä½¿ç”¨ OR è¿æ¥æ¡ä»¶</li></ol><ul><li><strong>åŸç†</strong>ï¼šå½“ä½¿ç”¨ OR è¿æ¥å¤šä¸ªæ¡ä»¶æ—¶ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªæ¡ä»¶ä¸ä½¿ç”¨ç´¢å¼•ï¼Œé‚£ä¹ˆæ•´ä¸ªæŸ¥è¯¢å¯èƒ½ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚</li><li><strong>ç¤ºä¾‹åŠè§£å†³åŠæ³•</strong></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- åŸæŸ¥è¯¢ï¼Œç´¢å¼•å¯èƒ½å¤±æ•ˆ</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">OR</span> name <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- ä¼˜åŒ–æ€è·¯ï¼Œä½¿ç”¨ UNION ALL ä»£æ›¿ OR</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">&#39;John&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>ä¿æŒç´¢å¼•åˆ—ç»Ÿè®¡ä¿¡æ¯çš„å‡†ç¡®æ€§</li></ol><ul><li><strong>åŸç†</strong>ï¼šMySQL çš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šæ ¹æ®ç´¢å¼•åˆ—çš„ç»Ÿè®¡ä¿¡æ¯æ¥é€‰æ‹©æœ€ä¼˜çš„æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ã€‚å¦‚æœç»Ÿè®¡ä¿¡æ¯ä¸å‡†ç¡®ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¼˜åŒ–å™¨åšå‡ºé”™è¯¯çš„å†³ç­–ï¼Œä»è€Œä½¿ç´¢å¼•å¤±æ•ˆã€‚</li><li><strong>è§£å†³åŠæ³•</strong>ï¼šå®šæœŸä½¿ç”¨ <code>ANALYZE TABLE</code> è¯­å¥æ¥æ›´æ–°è¡¨çš„ç»Ÿè®¡ä¿¡æ¯ã€‚</li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ANALYZE</span> <span class="token keyword">TABLE</span> users<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="7"><li>é¿å…åœ¨æ¨¡ç³ŠæŸ¥è¯¢çš„å¼€å¤´ä½¿ç”¨é€šé…ç¬¦</li></ol><ul><li><strong>åŸç†</strong>ï¼šå½“åœ¨æ¨¡ç³ŠæŸ¥è¯¢ä¸­ä½¿ç”¨ <code>LIKE</code> æ“ä½œç¬¦ï¼Œä¸”é€šé…ç¬¦ <code>%</code> å‡ºç°åœ¨å­—ç¬¦ä¸²çš„å¼€å¤´æ—¶ï¼ŒMySQL æ— æ³•ä½¿ç”¨ç´¢å¼•è¿›è¡Œå‰ç¼€åŒ¹é…ï¼Œä¼šå¯¼è‡´å…¨è¡¨æ‰«æã€‚</li><li>**ç¤ºä¾‹åŠè§£å†³åŠæ³•</li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- åŸæŸ¥è¯¢ï¼Œç´¢å¼•å¤±æ•ˆ</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> products <span class="token keyword">WHERE</span> name <span class="token operator">LIKE</span> <span class="token string">&#39;%apple%&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- ä¼˜åŒ–åï¼Œå¯ä½¿ç”¨ç´¢å¼•</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> products <span class="token keyword">WHERE</span> name <span class="token operator">LIKE</span> <span class="token string">&#39;apple%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.6.41ç‰ˆæœ¬çš„ sql æ‰§è¡Œçš„ç´¢å¼• type æƒ…å†µ</p><table><thead><tr><th>æ–¹å¼</th><th>ç´¢å¼•</th><th>ä¼˜åŒ–</th></tr></thead><tbody><tr><td>like â€˜%name%â€™</td><td>allâŒ</td><td></td></tr><tr><td>like â€˜name%â€™</td><td>range</td><td></td></tr><tr><td>like â€˜%nameâ€™</td><td>AllâŒ</td><td></td></tr><tr><td>in(â€˜nameâ€™)</td><td>æ•°é‡å°‘refæ•°é‡å¤šrange</td><td></td></tr><tr><td>not in (â€˜nameâ€™)</td><td>All</td><td></td></tr><tr><td>a = name or b = age</td><td>range</td><td></td></tr><tr><td>is not null</td><td>allâŒ</td><td></td></tr><tr><td>is null</td><td>ref</td><td></td></tr><tr><td>where concat(id, â€˜1â€™)=10</td><td>AllâŒ</td><td>ç»™å‡½æ•°ä¹ŸåŠ ç´¢å¼•</td></tr><tr><td>where id = concat(â€˜2â€™, â€˜1â€™)</td><td>ref</td><td></td></tr><tr><td>where id + 1 = 10</td><td>allâŒ</td><td></td></tr><tr><td>where id = 10 + 1</td><td>ref</td><td></td></tr><tr><td>éšå¼è½¬æ¢</td><td>allâŒ</td><td></td></tr></tbody></table><p>ç´¢å¼•å¤±æ•ˆï¼ˆ6ç‚¹ï¼‰ï¼šélikeå‰ç¼€ã€not inã€is not nullã€å‡½æ•°ã€è®¡ç®—ã€éšå¼è½¬æ¢</p><h2 id="å…­ã€ä¼˜åŒ–å™¨" tabindex="-1"><a class="header-anchor" href="#å…­ã€ä¼˜åŒ–å™¨" aria-hidden="true">#</a> å…­ã€ä¼˜åŒ–å™¨</h2><p><strong>ä¼˜åŒ–åŸåˆ™</strong></p><table><thead><tr><th>æ›´å°æ›´å¥½</th><th>é€‰æ‹©æœ€å°çš„æ•°æ®ç±»å‹å‡å°‘ç£ç›˜ç©ºé—´</th></tr></thead><tbody><tr><td>ç®€å•æ›´å¥½</td><td>å°½é‡ä½¿ç”¨mysqlå­˜åœ¨çš„æ•°æ®ç±»å‹</td></tr><tr><td>å°½é‡é¿å…null</td><td>å¯ä¸ºnullçš„åˆ—éœ€è¦æ›´å¤šçš„å­˜å‚¨ç©ºé—´</td></tr></tbody></table><table><thead><tr><th>å·¥å…·</th><th>æè¿°</th></tr></thead><tbody><tr><td>show profile</td><td>æ˜¾ç¤ºæŸ¥è¯¢å…·ä½“çš„æ‰§è¡Œæƒ…å†µ</td></tr><tr><td>Performance schema</td><td>æ€§èƒ½æ¨¡å—ï¼Œå¯ä»¥ç”¨æ¥åšç›‘æ§</td></tr><tr><td>show processlist</td><td>ç›‘æ§æ•°æ®è¿æ¥</td></tr></tbody></table><h3 id="_6-1-æ‰§è¡Œè®¡åˆ’" tabindex="-1"><a class="header-anchor" href="#_6-1-æ‰§è¡Œè®¡åˆ’" aria-hidden="true">#</a> 6.1 æ‰§è¡Œè®¡åˆ’</h3><p>é€šå¸¸åœ¨ä¼˜åŒ–æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ› <code>type</code> çš„å€¼å°½å¯èƒ½æ¥è¿‘ <code>system</code>ã€<code>const</code>ã€<code>eq_ref</code> ç­‰é«˜æ•ˆç±»å‹ï¼Œé¿å…å‡ºç° <code>ALL</code> è¿™ç§ä½æ•ˆçš„å…¨è¡¨æ‰«ææƒ…å†µã€‚</p><table><thead><tr><th>type å€¼</th><th>å«ä¹‰</th><th>æ€§èƒ½è¯´æ˜</th><th>ç¤ºä¾‹åŠè§£é‡Š</th></tr></thead><tbody><tr><td><code>system</code></td><td>è¡¨ä¸­åªæœ‰ä¸€è¡Œè®°å½•ï¼Œè¿™æ˜¯ <code>const</code> ç±»å‹çš„ç‰¹ä¾‹ï¼Œé€šå¸¸å‡ºç°åœ¨ç³»ç»Ÿè¡¨ä¸­ã€‚</td><td>æ€§èƒ½æœ€ä½³ï¼Œå› ä¸ºåªéœ€è®¿é—®ä¸€è¡Œæ•°æ®ã€‚</td><td>ä¾‹å¦‚ç³»ç»Ÿè¡¨ä¸­å›ºå®šè¡Œæ•°çš„æƒ…å†µï¼Œç”±äºè¡Œæ•°æå°‘ï¼ŒæŸ¥è¯¢å¯ä»¥ç¬é—´å®Œæˆã€‚</td></tr><tr><td><code>const</code></td><td>é€šè¿‡ç´¢å¼•ä¸€æ¬¡å°±æ‰¾åˆ°åŒ¹é…çš„è®°å½•ï¼Œå¸¸ç”¨äº <code>PRIMARY KEY</code> æˆ– <code>UNIQUE</code> ç´¢å¼•çš„ç­‰å€¼æŸ¥è¯¢ã€‚</td><td>æ€§èƒ½éå¸¸å¥½ï¼Œå› ä¸ºç›´æ¥é€šè¿‡ç´¢å¼•å®šä½åˆ°å”¯ä¸€è¡Œã€‚</td><td><code>SELECT * FROM users WHERE user_id = 1;</code> è‹¥ <code>user_id</code> æ˜¯ä¸»é”®ï¼ŒMySQL å¯ä»¥é€šè¿‡ä¸»é”®ç´¢å¼•ç›´æ¥å®šä½åˆ°è¯¥è®°å½•ã€‚</td></tr><tr><td><code>eq_ref</code></td><td>å¯¹äºæ¯ä¸ªæ¥è‡ªå‰é¢è¡¨çš„è¡Œç»„åˆï¼Œä»è¯¥è¡¨ä¸­è¯»å–ä¸€è¡Œã€‚å¸¸ç”¨äºè¿æ¥æ“ä½œä¸­ä½¿ç”¨ <code>PRIMARY KEY</code> æˆ– <code>UNIQUE</code> ç´¢å¼•ã€‚</td><td>æ€§èƒ½è¾ƒå¥½ï¼Œåœ¨è¿æ¥æŸ¥è¯¢ä¸­èƒ½é«˜æ•ˆåŒ¹é…ã€‚</td><td><code>sql&lt;br&gt;SELECT * FROM orders&lt;br&gt;JOIN customers ON orders.customer_id = customers.customer_id&lt;br&gt;WHERE orders.order_id = 1;&lt;br&gt;</code> è‹¥ <code>customer_id</code> åœ¨ <code>customers</code> è¡¨æ˜¯ä¸»é”®ï¼Œå¯¹äº <code>orders</code> è¡¨ä¸­æ¯ä¸€è¡ŒåŒ¹é…çš„ <code>customer_id</code>ï¼Œéƒ½èƒ½ä» <code>customers</code> è¡¨ä¸­å¿«é€Ÿæ‰¾åˆ°å¯¹åº”çš„ä¸€è¡Œã€‚</td></tr><tr><td><code>ref</code></td><td>ä½¿ç”¨éå”¯ä¸€ç´¢å¼•æˆ–å”¯ä¸€ç´¢å¼•çš„å‰ç¼€æ‰«æï¼Œè¿”å›åŒ¹é…æŸä¸ªå•ç‹¬å€¼çš„æ‰€æœ‰è¡Œã€‚</td><td>æ€§èƒ½ä¸é”™ï¼Œä½†å¯èƒ½è¿”å›å¤šè¡Œæ•°æ®ã€‚</td><td><code>SELECT * FROM products WHERE category_id = 2;</code> è‹¥ <code>category_id</code> æœ‰éå”¯ä¸€ç´¢å¼•ï¼ŒMySQL ä¼šé€šè¿‡è¯¥ç´¢å¼•æ‰¾å‡ºæ‰€æœ‰ <code>category_id</code> ä¸º 2 çš„è®°å½•ã€‚</td></tr><tr><td><code>fulltext</code></td><td>ä½¿ç”¨å…¨æ–‡ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ã€‚</td><td>é€‚ç”¨äºå…¨æ–‡æœç´¢åœºæ™¯ï¼Œæ€§èƒ½å–å†³äºå…¨æ–‡ç´¢å¼•çš„æ„å»ºå’Œæ•°æ®é‡ã€‚</td><td><code>SELECT * FROM articles WHERE MATCH(content) AGAINST(&#39;keyword&#39; IN NATURAL LANGUAGE MODE);</code> è‹¥ <code>content</code> åˆ—æœ‰å…¨æ–‡ç´¢å¼•ï¼Œå¯ä½¿ç”¨å…¨æ–‡æœç´¢æŸ¥æ‰¾åŒ…å«æŒ‡å®šå…³é”®å­—çš„æ–‡ç« ã€‚</td></tr><tr><td><code>ref_or_null</code></td><td>ä¸ <code>ref</code> ç±»ä¼¼ï¼Œä½†è¿˜ä¼šæœç´¢åŒ…å« <code>NULL</code> å€¼çš„è¡Œã€‚</td><td>æ€§èƒ½ç¨é€Šäº <code>ref</code>ï¼Œå› ä¸ºè¦é¢å¤–å¤„ç† <code>NULL</code> å€¼ã€‚</td><td><code>SELECT * FROM users WHERE email = &#39;test@example.com&#39; OR email IS NULL;</code> è‹¥ <code>email</code> æœ‰ç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶ä¼šæŸ¥æ‰¾åŒ¹é…æŒ‡å®šé‚®ç®±å’Œ <code>NULL</code> å€¼çš„è¡Œã€‚</td></tr><tr><td><code>index_merge</code></td><td>ä½¿ç”¨äº†ç´¢å¼•åˆå¹¶ä¼˜åŒ–ï¼Œå³åŒæ—¶ä½¿ç”¨å¤šä¸ªç´¢å¼•æ¥æ»¡è¶³æŸ¥è¯¢æ¡ä»¶ã€‚</td><td>æ€§èƒ½å› å…·ä½“æƒ…å†µè€Œå¼‚ï¼Œå¯èƒ½æ¯”å•ä¸€ç´¢å¼•æŸ¥è¯¢æ›´å¤æ‚ã€‚</td><td><code>sql&lt;br&gt;SELECT * FROM products&lt;br&gt;WHERE category_id = 2 OR price &gt; 100;&lt;br&gt;</code> è‹¥ <code>category_id</code> å’Œ <code>price</code> åˆ†åˆ«æœ‰ç´¢å¼•ï¼ŒMySQL å¯èƒ½ä¼šåˆå¹¶è¿™ä¸¤ä¸ªç´¢å¼•æ¥æ‰§è¡ŒæŸ¥è¯¢ã€‚</td></tr><tr><td><code>unique_subquery</code></td><td>è¯¥ç±»å‹ç”¨äº <code>IN</code> å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢ä½¿ç”¨ <code>UNIQUE</code> ç´¢å¼•ã€‚</td><td>æ€§èƒ½è¾ƒå¥½ï¼Œå­æŸ¥è¯¢èƒ½é€šè¿‡å”¯ä¸€ç´¢å¼•é«˜æ•ˆæŸ¥è¯¢ã€‚</td><td><code>SELECT * FROM products WHERE product_id IN (SELECT product_id FROM product_reviews WHERE rating = 5);</code> è‹¥ <code>product_reviews</code> è¡¨çš„ <code>product_id</code> æ˜¯å”¯ä¸€ç´¢å¼•ï¼Œå­æŸ¥è¯¢ä¼šæ›´é«˜æ•ˆã€‚</td></tr><tr><td><code>index_subquery</code></td><td>ç±»ä¼¼äº <code>unique_subquery</code>ï¼Œä½†å­æŸ¥è¯¢ä½¿ç”¨çš„æ˜¯éå”¯ä¸€ç´¢å¼•ã€‚</td><td>æ€§èƒ½ä¸å¦‚ <code>unique_subquery</code>ï¼Œå› ä¸ºéå”¯ä¸€ç´¢å¼•å¯èƒ½è¿”å›å¤šè¡Œã€‚</td><td>ä¸ <code>unique_subquery</code> ç¤ºä¾‹ç±»ä¼¼ï¼Œåªæ˜¯å­æŸ¥è¯¢ä¸­çš„ç´¢å¼•æ˜¯éå”¯ä¸€çš„ã€‚</td></tr><tr><td><code>range</code></td><td>åªæ£€ç´¢ç»™å®šèŒƒå›´çš„è¡Œï¼Œä½¿ç”¨ç´¢å¼•è¿›è¡ŒèŒƒå›´æ‰«æï¼Œå¦‚ <code>WHERE</code> å­å¥ä¸­æœ‰ <code>BETWEEN</code>ã€<code>&gt;</code>ã€<code>&lt;</code> ç­‰æ“ä½œã€‚</td><td>æ€§èƒ½å°šå¯ï¼Œæ ¹æ®èŒƒå›´å¤§å°å’Œæ•°æ®åˆ†å¸ƒè€Œå®šã€‚</td><td><code>SELECT * FROM orders WHERE order_date BETWEEN &#39;2023-01-01&#39; AND &#39;2023-12-31&#39;;</code> è‹¥ <code>order_date</code> æœ‰ç´¢å¼•ï¼Œä¼šä½¿ç”¨è¯¥ç´¢å¼•è¿›è¡ŒèŒƒå›´æ‰«æã€‚</td></tr><tr><td><code>index</code></td><td>å…¨ç´¢å¼•æ‰«æï¼Œæ‰«ææ•´ä¸ªç´¢å¼•æ ‘ã€‚</td><td>æ€§èƒ½ä¸€èˆ¬ï¼Œè™½ç„¶åªæ‰«æç´¢å¼•ï¼Œä½†å¯èƒ½æ¶‰åŠå¤§é‡ç´¢å¼•é¡¹ã€‚</td><td><code>SELECT product_name FROM products;</code> è‹¥ <code>product_name</code> æœ‰ç´¢å¼•ï¼Œå¯èƒ½ä¼šè¿›è¡Œå…¨ç´¢å¼•æ‰«æã€‚</td></tr><tr><td><code>ALL</code></td><td>å…¨è¡¨æ‰«æï¼Œéœ€è¦é€è¡Œæ‰«æè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚</td><td>æ€§èƒ½æœ€å·®ï¼Œå°¤å…¶æ˜¯å¯¹äºå¤§è¡¨ï¼Œä¼šæ¶ˆè€—å¤§é‡çš„æ—¶é—´å’Œèµ„æºã€‚</td><td><code>SELECT * FROM large_table;</code> æ²¡æœ‰åˆé€‚çš„ç´¢å¼•æ—¶ï¼ŒMySQL ä¼šè¿›è¡Œå…¨è¡¨æ‰«æã€‚</td></tr></tbody></table><h3 id="_6-2-æˆæœ¬è®¡ç®—" tabindex="-1"><a class="header-anchor" href="#_6-2-æˆæœ¬è®¡ç®—" aria-hidden="true">#</a> 6.2 æˆæœ¬è®¡ç®—</h3><p>åœ¨ MySQL ä¸­ï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå¯¹ä¸åŒçš„æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’è¿›è¡Œæˆæœ¬è®¡ç®—ï¼Œä»è€Œé€‰æ‹©æˆæœ¬æœ€ä½çš„æ‰§è¡Œè®¡åˆ’æ¥æ‰§è¡ŒæŸ¥è¯¢ã€‚æˆæœ¬è®¡ç®—ä¸»è¦è€ƒè™‘ä¸¤æ–¹é¢çš„æˆæœ¬ï¼šI/O æˆæœ¬å’Œ CPU æˆæœ¬ï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»ç›¸å…³å†…å®¹ã€‚</p><p>I/O æˆæœ¬ï¼šI/O æˆæœ¬ä¸»è¦æ¶‰åŠç£ç›˜ I/O æ“ä½œï¼Œä¹Ÿå°±æ˜¯ä»ç£ç›˜è¯»å–æ•°æ®é¡µçš„å¼€é”€ã€‚å› ä¸ºç£ç›˜çš„è¯»å†™é€Ÿåº¦è¿œä½äºå†…å­˜ï¼Œæ‰€ä»¥ I/O æˆæœ¬åœ¨æ•´ä½“æˆæœ¬ä¸­å æ¯”è¾ƒå¤§ã€‚MySQL ä¼šæ ¹æ®éœ€è¦è¯»å–çš„æ•°æ®é¡µæ•°é‡æ¥ä¼°ç®— I/O æˆæœ¬ã€‚ä¾‹å¦‚ï¼Œå½“éœ€è¦ä»ç£ç›˜è¯»å–å¤§é‡çš„æ•°æ®é¡µæ—¶ï¼ŒI/O æˆæœ¬å°±ä¼šå¾ˆé«˜ã€‚</p><p>CPU æˆæœ¬ï¼šCPU æˆæœ¬æ˜¯æŒ‡åœ¨å†…å­˜ä¸­å¯¹æ•°æ®è¿›è¡Œå¤„ç†çš„å¼€é”€ï¼ŒåŒ…æ‹¬å¯¹æ•°æ®è¿›è¡Œæ’åºã€æ¯”è¾ƒã€è¿‡æ»¤ç­‰æ“ä½œã€‚è™½ç„¶ CPU çš„å¤„ç†é€Ÿåº¦å¾ˆå¿«ï¼Œä½†å½“å¤„ç†å¤§é‡æ•°æ®æ—¶ï¼ŒCPU æˆæœ¬ä¹Ÿä¼šæ˜¾è‘—å¢åŠ ã€‚</p><p>æˆæœ¬è®¡ç®—ç›¸å…³å› ç´ ï¼š</p><ol><li>è¡¨çš„ç»Ÿè®¡ä¿¡æ¯ï¼šMySQL ä¼šæ”¶é›†è¡¨çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå¦‚è¡Œæ•°ã€æ•°æ®é¡µæ•°é‡ã€ç´¢å¼•åˆ†å¸ƒç­‰ã€‚è¿™äº›ç»Ÿè®¡ä¿¡æ¯æ˜¯æˆæœ¬è®¡ç®—çš„é‡è¦ä¾æ®ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šæ ¹æ®è¡¨çš„è¡Œæ•°æ¥ä¼°ç®—éœ€è¦è¯»å–çš„æ•°æ®é‡ï¼Œè¿›è€Œè®¡ç®— I/O æˆæœ¬ã€‚å¯ä»¥ä½¿ç”¨ <code>ANALYZE TABLE</code> è¯­å¥æ¥æ›´æ–°è¡¨çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä»¥ç¡®ä¿æˆæœ¬è®¡ç®—çš„å‡†ç¡®æ€§ã€‚</li></ol><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ANALYZE</span> <span class="token keyword">TABLE</span> your_table_name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li><p>ç´¢å¼•ä½¿ç”¨æƒ…å†µï¼šä½¿ç”¨ç´¢å¼•å¯ä»¥å‡å°‘éœ€è¦è¯»å–çš„æ•°æ®é‡ï¼Œä»è€Œé™ä½ I/O æˆæœ¬ã€‚ä¸åŒç±»å‹çš„ç´¢å¼•åœ¨æˆæœ¬è®¡ç®—ä¸­çš„è¡¨ç°ä¹Ÿä¸åŒã€‚ä¾‹å¦‚ï¼Œè¦†ç›–ç´¢å¼•å¯ä»¥ç›´æ¥ä»ç´¢å¼•ä¸­è·å–æ‰€éœ€çš„æ•°æ®ï¼Œé¿å…äº†å›è¡¨æ“ä½œï¼Œä»è€Œæ˜¾è‘—é™ä½æˆæœ¬ï¼›è€Œå…¨è¡¨æ‰«æåˆ™éœ€è¦è¯»å–è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œæˆæœ¬è¾ƒé«˜ã€‚</p></li><li><p>æŸ¥è¯¢æ¡ä»¶ï¼šæŸ¥è¯¢æ¡ä»¶çš„å¤æ‚åº¦å’Œé€‰æ‹©æ€§ä¹Ÿä¼šå½±å“æˆæœ¬è®¡ç®—ã€‚é€‰æ‹©æ€§æ˜¯æŒ‡æŸ¥è¯¢æ¡ä»¶èƒ½å¤Ÿè¿‡æ»¤æ‰å¤šå°‘æ•°æ®ï¼Œé€‰æ‹©æ€§è¶Šé«˜ï¼Œéœ€è¦å¤„ç†çš„æ•°æ®é‡å°±è¶Šå°‘ï¼Œæˆæœ¬ä¹Ÿå°±è¶Šä½ã€‚ä¾‹å¦‚ï¼Œ<code>WHERE column = &#39;specific_value&#39;</code> çš„é€‰æ‹©æ€§é€šå¸¸æ¯” <code>WHERE column LIKE &#39;%pattern%&#39;</code> è¦é«˜ï¼Œå› ä¸ºå‰è€…èƒ½æ›´ç²¾ç¡®åœ°è¿‡æ»¤æ•°æ®ã€‚</p></li></ol><p>æˆæœ¬è®¡ç®—ç¤ºä¾‹ï¼š</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>orders</code> è¡¨ï¼ŒåŒ…å« <code>order_id</code>ã€<code>customer_id</code>ã€<code>order_date</code> ç­‰åˆ—ï¼Œå¹¶ä¸”åœ¨ <code>order_date</code> åˆ—ä¸Šæœ‰ç´¢å¼•ã€‚ç°åœ¨æ‰§è¡Œä»¥ä¸‹æŸ¥è¯¢ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> orders <span class="token keyword">WHERE</span> order_date <span class="token operator">BETWEEN</span> <span class="token string">&#39;2023-01-01&#39;</span> <span class="token operator">AND</span> <span class="token string">&#39;2023-12-31&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šè€ƒè™‘ä»¥ä¸‹ä¸¤ç§æ‰§è¡Œè®¡åˆ’ï¼š</p><ul><li>ä½¿ç”¨ç´¢å¼•æ‰«æ <ul><li><strong>I/O æˆæœ¬</strong>ï¼šé€šè¿‡ç´¢å¼•å®šä½åˆ°æ»¡è¶³ <code>order_date</code> èŒƒå›´æ¡ä»¶çš„è®°å½•ï¼Œåªéœ€è¦è¯»å–ç´¢å¼•é¡µå’Œå¯¹åº”çš„å°‘é‡æ•°æ®é¡µã€‚å‡è®¾ç´¢å¼•é¡µæœ‰ 10 ä¸ªï¼Œæ•°æ®é¡µæœ‰ 20 ä¸ªï¼Œæ¯ä¸ªæ•°æ®é¡µçš„ I/O æˆæœ¬ä¸º 1ï¼Œé‚£ä¹ˆ I/O æˆæœ¬å¤§çº¦ä¸º 10 + 20 = 30ã€‚</li><li><strong>CPU æˆæœ¬</strong>ï¼šå¯¹ç´¢å¼•å’Œæ•°æ®è¿›è¡Œè¿‡æ»¤å’Œæ¯”è¾ƒæ“ä½œï¼Œå‡è®¾ CPU æˆæœ¬ä¸º 10ã€‚</li><li><strong>æ€»æˆæœ¬</strong>ï¼šI/O æˆæœ¬ + CPU æˆæœ¬ = 30 + 10 = 40ã€‚</li></ul></li><li>å…¨è¡¨æ‰«æ <ul><li><strong>I/O æˆæœ¬</strong>ï¼šéœ€è¦è¯»å–è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®é¡µï¼Œå‡è®¾è¡¨å…±æœ‰ 100 ä¸ªæ•°æ®é¡µï¼Œæ¯ä¸ªæ•°æ®é¡µçš„ I/O æˆæœ¬ä¸º 1ï¼Œé‚£ä¹ˆ I/O æˆæœ¬ä¸º 100ã€‚</li><li><strong>CPU æˆæœ¬</strong>ï¼šå¯¹æ‰€æœ‰æ•°æ®è¿›è¡Œè¿‡æ»¤æ“ä½œï¼Œå‡è®¾ CPU æˆæœ¬ä¸º 20ã€‚</li><li><strong>æ€»æˆæœ¬</strong>ï¼šI/O æˆæœ¬ + CPU æˆæœ¬ = 100 + 20 = 120ã€‚</li></ul></li></ul><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½¿ç”¨ç´¢å¼•æ‰«æçš„æˆæœ¬æ˜æ˜¾ä½äºå…¨è¡¨æ‰«æï¼Œæ‰€ä»¥æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šé€‰æ‹©ä½¿ç”¨ç´¢å¼•æ‰«æçš„æ‰§è¡Œè®¡åˆ’ã€‚</p><p>å¯ä»¥é€šè¿‡ <code>EXPLAIN FORMAT=JSON</code> è¯­å¥æŸ¥çœ‹æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’åŠç›¸å…³æˆæœ¬ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span> FORMAT<span class="token operator">=</span>JSON <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> orders <span class="token keyword">WHERE</span> order_date <span class="token operator">BETWEEN</span> <span class="token string">&#39;2023-01-01&#39;</span> <span class="token operator">AND</span> <span class="token string">&#39;2023-12-31&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿”å›ç»“æœä¸­ä¼šåŒ…å« <code>cost_info</code> éƒ¨åˆ†ï¼Œæ˜¾ç¤ºäº†ä¸åŒæ“ä½œçš„æˆæœ¬ä¼°ç®—ï¼Œå¸®åŠ©æˆ‘ä»¬åˆ†ææŸ¥è¯¢çš„æ€§èƒ½ã€‚</p><h3 id="_6-3-ä¼˜åŒ–æ…¢sql" tabindex="-1"><a class="header-anchor" href="#_6-3-ä¼˜åŒ–æ…¢sql" aria-hidden="true">#</a> 6.3 ä¼˜åŒ–æ…¢SQL</h3><p>æ·±å…¥åˆ†ææ‰§è¡Œè®¡åˆ’ï¼šEXPLAIN æ˜¯ SQL ä¼˜åŒ–çš„å¿…å¤‡å·¥å…·ã€‚</p><ul><li>æ£€æŸ¥æŸ¥è¯¢æ¡ä»¶çœ‹æ˜¯å¦å­˜åœ¨ç´¢å¼•å¤±æ•ˆï¼Œç´¢å¼•å¤±æ•ˆæƒ³åŠæ³•è§£å†³å¤±æ•ˆé—®é¢˜</li><li>æ£€æŸ¥æŸ¥è¯¢æ¡ä»¶çœ‹æ˜¯å¦æœ‰ç´¢å¼•ï¼Œè¯„ä¼°æ˜¯å¦å¯ä¸ºæŸ¥è¯¢æ¡ä»¶å­—æ®µæ·»åŠ ç´¢å¼•ã€‚è¯„ä¼°æ–¹å¼çœ‹æŸ¥è¯¢å­—æ®µæ˜¯å¦ä¸ºå¸¸ç”¨å­—æ®µï¼Œæ¯”å¦‚ç”¨æˆ·id ç­‰ SQL è¯­å¥ä¸è¡¨ç»“æ„ä¼˜åŒ–ï¼šé¿å…å¤æ‚æŸ¥è¯¢å’Œå¤§å­—æ®µã€‚ <ul><li>æŸ¥çœ‹æŸ¥è¯¢æ•°æ®æ˜¯å¦å¤ªå¤šï¼Œé€šè¿‡ä¸šåŠ¡é€»è¾‘ä¼˜åŒ–æŸ¥è¯¢èŒƒå›´ã€‚æ¯”å¦‚åˆ†æ‰¹å¤šæŸ¥è¯¢å‡ æ¬¡ æ•°æ®åº“é…ç½®è°ƒä¼˜ï¼šåˆç†è®¾ç½®å†…å­˜å’Œçº¿ç¨‹å‚æ•°ã€‚ æ¶æ„æ‰©å±•ï¼šç¼“å­˜ã€è¯»å†™åˆ†ç¦»ã€åˆ†åº“åˆ†è¡¨åº”å¯¹å¤§æ•°æ®é‡ã€‚</li><li>æ£€æŸ¥ mysqlåº“çœ‹æ˜¯ä¸æ˜¯æ•°æ®é‡å¤ªå¤§ï¼ˆå•è¡¨å¤§äº 500wï¼‰ï¼Œé€šè¿‡å½’æ¡£æˆ–è€…åˆ†åº“åˆ†è¡¨ç­‰æ–¹æ¡ˆè§£å†³å•è¡¨æ•°æ®é‡å¤ªå¤§é—®é¢˜</li></ul></li></ul><p>å…³é”®ç‚¹è®°å¿†ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>SQLä¼˜åŒ–ï¼šexplain + ç´¢å¼•å¤±æ•ˆ + åˆç†æ·»åŠ ç´¢å¼•
è¡¨ç»“æ„ä¼˜åŒ–ï¼šé¿å…å¤§å­—æ®µ + é€‚å½“å†—ä½™ + è¡¨æ‹†åˆ† + å°‘åµŒå¥—
æ•°æ®åº“é…ç½®ï¼šå°‘æ—¥å¿— + åˆç†çº¿ç¨‹æ±  + å¢åŠ æœåŠ¡å™¨èµ„æº
æ¶æ„æ‰©å±•ï¼šè¯»å†™åˆ†ç¦» + åˆ†åº“åˆ†è¡¨ + å¤§æ•°æ®æŸ¥è¯¢
åº”ç”¨å±‚é¢ï¼šæ‰¹é‡ + ç¼“å­˜ + å¼‚æ­¥	
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸ƒã€é”" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€é”" aria-hidden="true">#</a> ä¸ƒã€é”</h2><h3 id="_7-1-åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#_7-1-åˆ†ç±»" aria-hidden="true">#</a> 7.1 åˆ†ç±»</h3><table><thead><tr><th>å±æ€§</th><th>å…±äº«é”ï¼ˆè¯»é”ï¼‰ã€æ’ä»–ï¼ˆå†™é”ï¼‰</th></tr></thead><tbody><tr><td>ç²’åº¦</td><td>è¡¨é”ã€è¡Œé”ã€è®°å½•é”ï¼ˆè¡Œé”ï¼‰ã€é—´éš™é”ã€ä¸´é”®é”</td></tr><tr><td>çŠ¶æ€</td><td>æ„å‘å…±äº«é”ã€æ„å‘æ’å®ƒé”</td></tr></tbody></table><p>é—´éš™é”: è§£å†³RRçº§åˆ«ä¸‹çš„å½“å‰è¯»å‡ºç°å¹»è¯»çš„æƒ…å†µã€‚åœ¨è¡Œé”çš„å‰åæŒ‡é’ˆä¸Šéƒ½åŠ é”</p><p>æ„å‘é”ï¼šéƒ½æ˜¯innodbè‡ªåŠ¨åŠ çš„ï¼Œä¸éœ€è¦ç”¨æˆ·å¹²é¢„</p><p><strong>1.2 æ¡ˆä¾‹</strong></p><p>ä¸€å¼ è¡¨t id(ä¸»é”®)ã€c(æ™®é€šç´¢å¼•)ã€d å­—æ®µ æ’å…¥æ•°æ®(0,0,0),(5,5,5),(10,10,10),(15,15,15)</p><ul><li>update t set d=1 where id = 7 ä¸»é”®ç´¢å¼•ä¸Šçš„ (5,10)é—´éš™é”</li><li>update t set d=1 where id = 5 ä¸»é”®ç´¢å¼•ä¸Šçš„ 5è¡Œé”</li><li>update t set d=1 where c = 7 æ™®é€šç´¢å¼•ä¸Šçš„ (5,10)é—´éš™é”</li><li>update t set d=1 where c = 5 æ™®é€šç´¢å¼•ä¸Šçš„ (0,5]ä¸´é”®é” (5,10)é—´éš™é”</li><li>update t set d=1 where c &lt;11 æ™®é€šç´¢å¼•ä¸Šçš„ (0,15]ä¸´é”®é”</li><li>update t set d=1 where c &gt;=10 æ™®é€šç´¢å¼•ä¸Šçš„ (5,10]ä¸´é”®é” (10,~]çš„ä¸´é”®é”</li><li>update t set d=1 where c &gt;=10 and c &lt;11 æ™®é€šç´¢å¼•ä¸Šçš„ (5,15]ä¸´é”®é”</li><li>update t set d=1 where id &gt;=10 and id &lt;11 ä¸»é”®ç´¢å¼•ä¸Šçš„ 10è¡Œé” (10,15)é—´éš™é”</li></ul><h3 id="_7-2-æ­»é”æ£€æµ‹" tabindex="-1"><a class="header-anchor" href="#_7-2-æ­»é”æ£€æµ‹" aria-hidden="true">#</a> 7.2 æ­»é”æ£€æµ‹</h3><p>åŸå› : å¤šä¸ªäº‹åŠ¡äº‰å¤ºèµ„æºå½¢æˆå¾ªç¯ç­‰å¾… æ£€æµ‹æœºåˆ¶: äº‹åŠ¡è§†ä¸ºèŠ‚ç‚¹ï¼Œé”ç­‰å¾…è§†ä¸ºå‘è¾¹ã€‚å›¾ä¸­å­˜åœ¨ç¯åˆ™ä¸ºæ­»é”</p><ul><li>åå°çº¿ç¨‹å®šæœŸæ‰«æ æˆ– é…ç½®æœ‰æ–°äº‹åŠ¡ç«‹é©¬æ‰«æ</li><li>å›æ»šç­–ç•¥ä¸ºäº‹åŠ¡ä»£ä»·æœ€å°çš„è¿”å›ï¼ˆé‡æœ€å°ï¼Œundo æ—¥å¿—å°ï¼‰ã€é€‰ä¸­çš„é”™è¯¯è¿”å›1213 DeadLock found.</li></ul><p>æ—¥å¿—åˆ†æï¼šSHOW ENGINE INNODB STATUS æŸ¥çœ‹é”æ—¥å¿— æ­»é”ä¼˜åŒ–ï¼šæ§åˆ¶é”æ£€æŸ¥é¢‘ç‡ã€å‡å°‘é”å†²çªã€ä¸šåŠ¡å±‚å®¹é”™ï¼ˆé‡è¯•æœºåˆ¶ã€ç†”æ–­é™çº§ï¼‰</p><h3 id="_7-3-è¡¨åŠ å­—æ®µ" tabindex="-1"><a class="header-anchor" href="#_7-3-è¡¨åŠ å­—æ®µ" aria-hidden="true">#</a> 7.3 è¡¨åŠ å­—æ®µ</h3><p>ä¸€èˆ¬çº¿ä¸ŠåŠ å­—æ®µçš„æ—¶å€™æ•°æ®åº“ä¼šç»™æ•°æ®åŠ é”ï¼Œè¿™ç§æƒ…å†µå°±ä¼šå‡ºç°åŠ é”è€—æ—¶é•¿å½±å“ä¸šåŠ¡çš„æƒ…å†µï¼Œé‚£ä¹ˆmysqlçº¿ä¸Šæ•°æ®åŠ å­—æ®µå¦‚ä½•è§£å†³</p><ul><li>MyIsam: æ¯æ¬¡æ–°å¢å­—æ®µéƒ½ä¼šé‡å»ºè¡¨ï¼Œå»ºç«‹ä¸´æ—¶è¡¨ã€‚è€—æ—¶é•¿</li><li>Innodbï¼ˆ5.6 ä¹‹åï¼‰ï¼šå¯ä»¥ä¸ºç©ºçš„å­—æ®µç›´æ¥ä¿®æ”¹è¡¨çš„å…ƒæ•°æ®åå¼‚æ­¥å¡«å……æ•°æ®ã€éç©ºé»˜è®¤å€¼ä¸å¤æ‚å¯èƒ½åŸåœ°ä¿®æ”¹æ•°æ®ã€éç©ºé»˜è®¤å€¼å¤æ‚ï¼ˆå¦‚é»˜è®¤å€¼æ˜¯æ—¥æœŸï¼‰å¯èƒ½é‡å»ºè¡¨ã€‚ 5.6 ä¹‹å‰æ‰€æœ‰åŠ å­—æ®µæ“ä½œéƒ½ä¼šé‡å»ºè¡¨</li><li>å»ºè®®å¤§è¡¨ç”¨pt-online-schema-change å·¥å…·å¢åŠ å­—æ®µï¼Œ é¿å…ç¼©è¡¨</li></ul><table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>InnoDB è¡Œä¸º</strong></th><th><strong>åŸå› </strong></th></tr></thead><tbody><tr><td>éç©ºå­—æ®µ + ç®€å•é»˜è®¤å€¼</td><td>åŸåœ°ä¿®æ”¹ï¼Œå¯èƒ½é”è¡¨</td><td>é»˜è®¤å€¼å¯å¿«é€Ÿå¡«å……</td></tr><tr><td>éç©ºå­—æ®µ + å¤æ‚é»˜è®¤å€¼</td><td>ä¸´æ—¶è¡¨é‡å»ºï¼Œé”è¡¨è¿ç§»</td><td>åŠ¨æ€é»˜è®¤å€¼éœ€é€è¡Œè®¡ç®—ï¼ŒåŸåœ°ä¿®æ”¹æ•ˆç‡ä½</td></tr><tr><td>ç¬¬ä¸‰æ–¹å·¥å…·ï¼ˆå¦‚ pt-oscï¼‰</td><td>å¼ºåˆ¶ä¸´æ—¶è¡¨é‡å»ºï¼Œæ— é”è¿ç§»</td><td>é€šè¿‡è§¦å‘å™¨å¼‚æ­¥åŒæ­¥æ•°æ®</td></tr></tbody></table><p>æ•°æ®è¿ç§»æ—¶ï¼Œå…ˆå…³é—­ç´¢å¼•ï¼Œæ•°æ®è¿ç§»å®Œæˆä¹‹ååœ¨æ‰“å¼€ç´¢å¼•ã€‚ è¿™æ ·æ•ˆç‡é«˜ã€‚</p><h2 id="å…«ã€ä¸­é—´ä»¶å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#å…«ã€ä¸­é—´ä»¶å¯¹æ¯”" aria-hidden="true">#</a> å…«ã€ä¸­é—´ä»¶å¯¹æ¯”</h2><p>æ ¸å¿ƒæœºåˆ¶å¯¹æ¯”</p><table><thead><tr><th>ç»´åº¦</th><th><strong>MySQL</strong></th><th><strong>Redis</strong></th><th><strong>Kafka</strong></th><th><strong>RocketMQ</strong></th></tr></thead><tbody><tr><td><strong>å¤åˆ¶æ–¹å¼</strong></td><td>å¼‚æ­¥å¤åˆ¶ï¼ˆåŸºäº binlogï¼‰</td><td>å¼‚æ­¥å¤åˆ¶ï¼ˆå…¨é‡ RDB + å¢é‡å‘½ä»¤æµï¼‰</td><td>åŒæ­¥å¤åˆ¶ï¼ˆåŸºäº ISR æœºåˆ¶ï¼‰</td><td>æ”¯æŒåŒæ­¥ / å¼‚æ­¥å¤åˆ¶ï¼ˆDLedger æ¶æ„ï¼‰</td></tr><tr><td><strong>æ•°æ®ä¸€è‡´æ€§</strong></td><td>æœ€ç»ˆä¸€è‡´ï¼ˆå¯èƒ½å­˜åœ¨å»¶è¿Ÿï¼‰</td><td>æœ€ç»ˆä¸€è‡´ï¼ˆå¼‚æ­¥å¤åˆ¶ï¼‰</td><td>å¼ºä¸€è‡´ï¼ˆåŒæ­¥å‰¯æœ¬ç¡®è®¤ï¼‰</td><td>å¼ºä¸€è‡´ï¼ˆåŒæ­¥åŒå†™ï¼‰/ æœ€ç»ˆä¸€è‡´ï¼ˆå¼‚æ­¥ï¼‰</td></tr><tr><td><strong>æ•…éšœè½¬ç§»</strong></td><td>éœ€æ‰‹åŠ¨æˆ–ä¾èµ–å·¥å…·ï¼ˆå¦‚ MHAï¼‰</td><td>æ‰‹åŠ¨åˆ‡æ¢æˆ– Sentinel è‡ªåŠ¨åˆ‡æ¢</td><td>è‡ªåŠ¨é€‰ä¸¾æ–° Leaderï¼ˆZooKeeper åè°ƒï¼‰</td><td>è‡ªåŠ¨åˆ‡æ¢ï¼ˆDLedger + Raft åè®®ï¼‰</td></tr><tr><td><strong>å¤åˆ¶ç²’åº¦</strong></td><td>æ•°æ®åº“çº§ï¼ˆæ‰€æœ‰åº“è¡¨ï¼‰</td><td>å®ä¾‹çº§ï¼ˆæ‰€æœ‰æ•°æ®ï¼‰</td><td>åˆ†åŒºçº§ï¼ˆæ¯ä¸ªåˆ†åŒºç‹¬ç«‹å¤åˆ¶ï¼‰</td><td>æ¶ˆæ¯æ—¥å¿—æ–‡ä»¶ï¼ˆæŒ‰ Topic/Queue éš”ç¦»ï¼‰</td></tr><tr><td><strong>å†™æ€§èƒ½å½±å“</strong></td><td>ä½ï¼ˆå¼‚æ­¥å¤åˆ¶ï¼‰</td><td>ä½ï¼ˆå¼‚æ­¥å¤åˆ¶ï¼‰</td><td>è¾ƒé«˜ï¼ˆåŒæ­¥ç­‰å¾… ISRï¼‰</td><td>é«˜ï¼ˆåŒæ­¥åŒå†™ï¼‰/ ä½ï¼ˆå¼‚æ­¥ï¼‰</td></tr></tbody></table><p>éƒ¨ç½²æ¨¡å¼</p><table><thead><tr><th><strong>æ¨¡å¼</strong></th><th><strong>MySQL</strong></th><th><strong>Redis</strong></th><th><strong>Kafka</strong></th><th><strong>RocketMQ</strong></th></tr></thead><tbody><tr><td><strong>å…¸å‹æ¶æ„</strong></td><td>ä¸€ä¸»å¤šä»</td><td>ä¸€ä¸»å¤šä» / çº§è”å¤åˆ¶</td><td>å¤š Brokerï¼ˆåˆ†åŒºï¼‰</td><td>å¤š Master + Slave</td></tr><tr><td><strong>èŠ‚ç‚¹æ•°é‡å»ºè®®</strong></td><td>1 ä¸» + 1 ä»ï¼ˆæœ€ä½ï¼‰</td><td>1 ä¸» + 2 ä»ï¼ˆSentinelï¼‰</td><td>3 èŠ‚ç‚¹ä»¥ä¸Š</td><td>2 ä¸» + 2 ä»ï¼ˆDLedgerï¼‰</td></tr><tr><td><strong>è‡ªåŠ¨æ•…éšœè½¬ç§»</strong></td><td>éœ€ç¬¬ä¸‰æ–¹å·¥å…·</td><td>Sentinel æ”¯æŒ</td><td>è‡ªåŠ¨ï¼ˆZooKeeperï¼‰</td><td>è‡ªåŠ¨ï¼ˆDLedgerï¼‰</td></tr><tr><td><strong>è¯»å†™åˆ†ç¦»</strong></td><td>ä¸»å†™ä»è¯»</td><td>ä¸»å†™ä»è¯»</td><td>Leader å†™ï¼ŒFollower è¯»</td><td>Master å†™ï¼ŒSlave è¯»</td></tr></tbody></table><table><thead><tr><th>åç§°</th><th>MySQL</th><th>Redis</th><th>Kafka</th><th>RocketMQ</th></tr></thead><tbody><tr><td>é˜²æ–­ç”µæ–¹æ¡ˆ</td><td><strong>redo log</strong>ï¼šInnoDB å­˜å‚¨å¼•æ“ç‰¹æœ‰çš„æ—¥å¿—æœºåˆ¶ï¼Œå®ƒè®°å½•äº†äº‹åŠ¡å¯¹æ•°æ®é¡µçš„ç‰©ç†ä¿®æ”¹æ“ä½œã€‚å½“æ•°æ®åº“å´©æºƒæˆ–å¼‚å¸¸å…³é—­åï¼Œé€šè¿‡é‡æ”¾ <code>redo log</code> å¯ä»¥å°†æœªæŒä¹…åŒ–åˆ°ç£ç›˜çš„æ•°æ®é¡µä¿®æ”¹æ“ä½œé‡æ–°åº”ç”¨ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œäº‹åŠ¡çš„æŒä¹…æ€§ã€‚é‡‡ç”¨é¡ºåºè¿½åŠ å†™å…¥ç£ç›˜ï¼Œå‡å°‘äº†éšæœº I/O å¼€é”€ï¼Œæé«˜äº†å†™å…¥æ€§èƒ½ã€‚</td><td><strong>AOFï¼ˆAppend - Only Fileï¼‰</strong>ï¼šä»¥æ–‡æœ¬åè®®æ ¼å¼æŒ‰é¡ºåºè®°å½• Redis æœåŠ¡å™¨çš„æ‰€æœ‰å†™æ“ä½œå‘½ä»¤ã€‚åœ¨ Redis é‡å¯æ—¶ï¼Œé€šè¿‡é‡æ–°æ‰§è¡Œ AOF æ–‡ä»¶ä¸­çš„å‘½ä»¤æ¥æ¢å¤æ•°æ®ï¼Œç¡®ä¿æ•°æ®çš„æŒä¹…æ€§ã€‚AOF æŒä¹…åŒ–å¯ä»¥é€šè¿‡é…ç½®ä¸åŒçš„åŒæ­¥ç­–ç•¥æ¥å¹³è¡¡æ€§èƒ½å’Œæ•°æ®å®‰å…¨æ€§ã€‚</td><td><strong>Logï¼ˆåˆ†åŒºæ—¥å¿—ï¼‰</strong>ï¼šKafka å°†æ¶ˆæ¯ä»¥æ—¥å¿—çš„å½¢å¼é¡ºåºå†™å…¥ç£ç›˜çš„åˆ†åŒºæ–‡ä»¶ä¸­ã€‚æ¯ä¸ªåˆ†åŒºéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶ä¸” Kafka é‡‡ç”¨å¤šå‰¯æœ¬æœºåˆ¶ï¼Œå°†æ—¥å¿—æ•°æ®å¤åˆ¶åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šã€‚å³ä½¿æŸä¸ªèŠ‚ç‚¹å‡ºç°æ•…éšœæˆ–æ–­ç”µï¼Œå…¶ä»–å‰¯æœ¬ä»ç„¶å¯ä»¥æä¾›æ•°æ®ï¼Œä¿è¯æ•°æ®çš„å®‰å…¨æ€§å’Œå¯ç”¨æ€§ã€‚</td><td><strong>CommitLog</strong>ï¼šRocketMQ é‡‡ç”¨ <code>CommitLog</code> æ¥å­˜å‚¨æ¶ˆæ¯æ•°æ®ï¼Œæ‰€æœ‰ä¸»é¢˜çš„æ¶ˆæ¯éƒ½é¡ºåºå†™å…¥ <code>CommitLog</code> æ–‡ä»¶ä¸­ã€‚åŒæ—¶ï¼Œé€šè¿‡ <code>ConsumeQueue</code> ä½œä¸ºæ¶ˆæ¯æ¶ˆè´¹çš„ç´¢å¼•ï¼Œæé«˜æ¶ˆæ¯æ¶ˆè´¹çš„æ•ˆç‡ã€‚<code>CommitLog</code> ç»“åˆ <code>ConsumeQueue</code> å®ç°äº†æ¶ˆæ¯çš„é«˜å¯é æŒä¹…åŒ–ï¼Œå³ä½¿åœ¨æ–­ç”µç­‰å¼‚å¸¸æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚</td></tr><tr><td>è®°å½•æ–¹å¼</td><td>é¡ºåºè¿½åŠ åˆ° <code>redo log</code> æ–‡ä»¶ï¼Œè®°å½•çš„æ˜¯äº‹åŠ¡å¯¹æ•°æ®é¡µçš„ç‰©ç†ä¿®æ”¹ï¼Œå±äºç‰©ç†æ—¥å¿—ã€‚ä¾‹å¦‚ï¼Œè®°å½•æŸä¸€è¡Œæ•°æ®è¢«æ›´æ–°åï¼Œæ•°æ®é¡µçš„å…·ä½“ä¿®æ”¹å†…å®¹ä»¥åŠæ•°æ®åœ¨ç£ç›˜ä¸­çš„ä½ç½®ä¿¡æ¯ã€‚</td><td>é¡ºåºè¿½åŠ åˆ° AOF æ–‡ä»¶ï¼Œè®°å½•æ‰€æœ‰å†™æ“ä½œå‘½ä»¤ï¼Œå±äºé€»è¾‘æ—¥å¿—ã€‚å¦‚ <code>SET key value</code>ã€<code>INCR counter</code> ç­‰å‘½ä»¤ï¼Œä»¥æ–‡æœ¬å½¢å¼å­˜å‚¨ï¼Œä¾¿äºé˜…è¯»å’Œè§£æã€‚</td><td>é¡ºåºè¿½åŠ åˆ°åˆ†åŒºæ—¥å¿—æ–‡ä»¶ï¼Œæ¯ä¸ªåˆ†åŒºç‹¬ç«‹è¿›è¡Œé¡ºåºå†™å…¥ã€‚æ¶ˆæ¯ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨ï¼Œå¹¶ä¸”æ¯ä¸ªåˆ†åŒºå¯ä»¥åˆ†å¸ƒåœ¨ä¸åŒçš„ç£ç›˜ä¸Šï¼Œæé«˜äº†å¹¶å‘å†™å…¥å’Œè¯»å–çš„æ€§èƒ½ã€‚</td><td>é¡ºåºè¿½åŠ åˆ° <code>CommitLog</code> æ–‡ä»¶ï¼ŒåŒæ—¶ä¼šä¸ºæ¯ä¸ªä¸»é¢˜å’Œé˜Ÿåˆ—ç”Ÿæˆå¯¹åº”çš„ <code>ConsumeQueue</code> ç´¢å¼•ã€‚æ¶ˆæ¯çš„å±æ€§ã€å†…å®¹ç­‰ä¿¡æ¯éƒ½ä¼šè¢«å®Œæ•´è®°å½•åœ¨ <code>CommitLog</code> ä¸­ï¼Œè€Œ <code>ConsumeQueue</code> åˆ™è®°å½•äº†æ¶ˆæ¯åœ¨ <code>CommitLog</code> ä¸­çš„åç§»é‡ç­‰ä¿¡æ¯ï¼Œæ–¹ä¾¿å¿«é€Ÿå®šä½å’Œæ¶ˆè´¹æ¶ˆæ¯ã€‚</td></tr><tr><td>å­˜å‚¨å†…å®¹</td><td>ä¸»è¦å­˜å‚¨æ•°æ®åº“ä¸­æ•°æ®çš„å¢åˆ æ”¹æ“ä½œä»¥åŠæ•°æ®åœ¨ç£ç›˜ä¸­çš„ä½ç½®ã€‚å…·ä½“åŒ…æ‹¬äº‹åŠ¡å¯¹æ•°æ®é¡µçš„ä¿®æ”¹ä¿¡æ¯ï¼Œå¦‚æ’å…¥æ–°è®°å½•ã€æ›´æ–°å·²æœ‰è®°å½•ã€åˆ é™¤è®°å½•ç­‰æ“ä½œå¯¹åº”çš„ç‰©ç†æ•°æ®é¡µå˜åŒ–ï¼Œä»¥åŠè¿™äº›æ•°æ®åœ¨ç£ç›˜ä¸Šçš„å­˜å‚¨ä½ç½®ï¼Œç”¨äºåœ¨æ¢å¤æ—¶å‡†ç¡®æ‰¾åˆ°å¹¶åº”ç”¨ä¿®æ”¹ã€‚</td><td>å­˜å‚¨æ‰€æœ‰å¯¹ Redis æ•°æ®åº“è¿›è¡Œçš„å†™æ“ä½œå‘½ä»¤ã€‚æ¶µç›–äº†å¯¹å„ç§æ•°æ®ç»“æ„ï¼ˆå¦‚å­—ç¬¦ä¸²ã€å“ˆå¸Œè¡¨ã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆç­‰ï¼‰çš„æ“ä½œå‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤å¯ä»¥åœ¨ Redis é‡å¯æ—¶é‡æ–°æ‰§è¡Œï¼Œä»¥æ¢å¤æ•°æ®åº“çš„çŠ¶æ€ã€‚</td><td>å­˜å‚¨æ¶ˆæ¯çš„é”®ï¼ˆkeyï¼‰å’Œå€¼ï¼ˆvalueï¼‰ã€‚æ¶ˆæ¯çš„é”®å¯ä»¥ç”¨äºæ¶ˆæ¯çš„åˆ†ç±»å’Œè·¯ç”±ï¼Œå€¼åˆ™æ˜¯å…·ä½“çš„æ¶ˆæ¯å†…å®¹ã€‚Kafka è¿˜ä¼šå­˜å‚¨ä¸€äº›å…ƒæ•°æ®ä¿¡æ¯ï¼Œå¦‚æ¶ˆæ¯çš„åç§»é‡ã€æ—¶é—´æˆ³ç­‰ï¼Œç”¨äºæ¶ˆæ¯çš„ç®¡ç†å’Œæ¶ˆè´¹ã€‚</td><td>å­˜å‚¨æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³ä¿¡æ¯ã€æ¶ˆæ¯å±æ€§ä»¥åŠæ¶ˆæ¯å†…å®¹ã€‚æ¶ˆæ¯å±æ€§åŒ…æ‹¬æ¶ˆæ¯çš„ä¸»é¢˜ã€æ ‡ç­¾ã€ä¼˜å…ˆçº§ç­‰ï¼Œæ¶ˆæ¯å†…å®¹åˆ™æ˜¯å…·ä½“çš„ä¸šåŠ¡æ•°æ®ã€‚<code>ConsumeQueue</code> å­˜å‚¨äº†æ¶ˆæ¯åœ¨ <code>CommitLog</code> ä¸­çš„ç´¢å¼•ä¿¡æ¯ï¼Œæ–¹ä¾¿æ¶ˆè´¹è€…å¿«é€Ÿå®šä½å’Œæ¶ˆè´¹æ¶ˆæ¯ã€‚</td></tr><tr><td>æ–‡ä»¶å¤ªå¤§æ–¹æ¡ˆ</td><td>é‡‡ç”¨å¤šä¸ªå›ºå®šå¤§å°ï¼ˆé€šå¸¸ä¸º 48MBï¼‰çš„ <code>redo log</code> æ–‡ä»¶è¿›è¡Œå¾ªç¯ä½¿ç”¨ã€‚å½“ä¸€ä¸ª <code>redo log</code> æ–‡ä»¶å†™æ»¡åï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ–‡ä»¶ç»§ç»­å†™å…¥ã€‚æ—§çš„ <code>redo log</code> æ–‡ä»¶åœ¨äº‹åŠ¡æäº¤å®Œæˆä¸”ä¸å†éœ€è¦ç”¨äºæ¢å¤æ—¶ä¼šè¢«æ–°çš„æ—¥å¿—è¦†ç›–ï¼Œé¿å…äº†æ–‡ä»¶æ— é™å¢å¤§çš„é—®é¢˜ã€‚</td><td>ä¸€æ–¹é¢è®¾ç½®é”®å€¼å¯¹çš„ä¿ç•™æ—¶é—´ï¼Œè¿‡æœŸçš„é”®å€¼å¯¹ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼Œå‡å°‘ AOF æ–‡ä»¶ä¸­çš„å†—ä½™æ•°æ®ã€‚å¦ä¸€æ–¹é¢ï¼Œé‡‡ç”¨æ—¥å¿—å‹ç¼©æŠ€æœ¯ï¼Œå°†å¤šä¸ªå¯¹åŒä¸€ä¸ªé”®çš„æ“ä½œåˆå¹¶ä¸ºä¸€ä¸ªæœ€ç»ˆçŠ¶æ€çš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œå°†å¤šæ¬¡å¯¹ä¸€ä¸ªè®¡æ•°å™¨é”®çš„ <code>INCR</code> æ“ä½œåˆå¹¶ä¸ºä¸€ä¸ª <code>SET</code> æ“ä½œï¼Œä»è€Œå‡å° AOF æ–‡ä»¶çš„å¤§å°ã€‚</td><td>å®šæœŸè¿›è¡Œæ—¥å¿—æ–‡ä»¶é‡å†™ï¼Œå°†å¤šä¸ªå‘½ä»¤æ±‡æ€»ä¸ºä¸€ä¸ªï¼Œå‡å°‘æ–‡ä»¶ä¸­çš„å†—ä½™ä¿¡æ¯ã€‚åŒæ—¶ï¼Œè®¾ç½®æ—¥å¿—çš„ä¿ç•™æ—¶é—´ï¼Œè¿‡æœŸçš„æ—¥å¿—æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨æ¸…ç†ï¼Œä»¥æ§åˆ¶æ—¥å¿—æ–‡ä»¶çš„æ€»ä½“å¤§å°ï¼Œé¿å…å ç”¨è¿‡å¤šçš„ç£ç›˜ç©ºé—´ã€‚</td><td>è®¾ç½®æ¶ˆæ¯çš„è¿‡æœŸæ—¶é—´ï¼Œå½“æ¶ˆæ¯è¶…è¿‡è®¾å®šçš„è¿‡æœŸæ—¶é—´åï¼Œä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚è¿™æ ·å¯ä»¥æ§åˆ¶ <code>CommitLog</code> æ–‡ä»¶çš„å¤§å°ï¼ŒåŒæ—¶ä¹Ÿèƒ½ä¿è¯ç³»ç»Ÿä¸­åªä¿ç•™æœ‰æ•ˆçš„æ¶ˆæ¯æ•°æ®ã€‚</td></tr><tr><td>æ¢å¤æ–¹å¼</td><td>åœ¨æ•°æ®åº“å¯åŠ¨æ—¶ï¼Œå°† <code>redo log</code> åŠ è½½åˆ°å†…å­˜ï¼Œä»ä¸Šæ¬¡çš„æ£€æŸ¥ç‚¹ï¼ˆcheckpointï¼‰å¼€å§‹ï¼Œé€šè¿‡é‡æ”¾ <code>redo log</code> ä¸­è®°å½•çš„æœªå®Œæˆçš„ä¿®æ”¹æ“ä½œï¼Œå°†æ•°æ®åº“çŠ¶æ€æ¢å¤åˆ°å´©æºƒå‰çš„ä¸€è‡´çŠ¶æ€ã€‚æ£€æŸ¥ç‚¹è®°å½•äº†æ•°æ®åº“åœ¨æŸä¸ªæ—¶é—´ç‚¹çš„ä¸€è‡´æ€§çŠ¶æ€ï¼Œä»æ£€æŸ¥ç‚¹å¼€å§‹é‡æ”¾å¯ä»¥å‡å°‘ä¸å¿…è¦çš„æ“ä½œï¼Œæé«˜æ¢å¤æ•ˆç‡ã€‚</td><td>åœ¨ Redis å¯åŠ¨æ—¶ï¼Œå°† AOF æ•°æ®åŠ è½½åˆ°å†…å­˜ï¼ŒæŒ‰é¡ºåºé‡æ–°æ‰§è¡Œ AOF æ–‡ä»¶ä¸­çš„å‘½ä»¤ï¼Œå°†æ•°æ®åº“çŠ¶æ€æ¢å¤åˆ°æ–­ç”µå‰çš„çŠ¶æ€ã€‚åœ¨é‡æ”¾è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°é”™è¯¯å‘½ä»¤ï¼ŒRedis ä¼šæ ¹æ®é…ç½®è¿›è¡Œç›¸åº”å¤„ç†ï¼Œå¦‚è·³è¿‡é”™è¯¯å‘½ä»¤æˆ–åœæ­¢æ¢å¤è¿‡ç¨‹ã€‚</td><td>ç”Ÿäº§è€…å°†æ¶ˆæ¯å†™å…¥ç£ç›˜åå‘å®¢æˆ·ç«¯å“åº”ï¼Œæ¶ˆè´¹è€…ä»ç£ç›˜è¯»å–æ—¥å¿—æ•°æ®è¿›è¡Œæ¶ˆè´¹ã€‚åœ¨ Kafka é›†ç¾¤ä¸­ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹å‡ºç°æ•…éšœï¼Œæ¶ˆè´¹è€…å¯ä»¥ä»å…¶ä»–å‰¯æœ¬èŠ‚ç‚¹ç»§ç»­è¯»å–æ¶ˆæ¯ï¼Œä¿è¯æ•°æ®çš„è¿ç»­æ€§å’Œå¯ç”¨æ€§ã€‚</td><td>æ¶ˆæ¯å†™å…¥ç£ç›˜çš„ <code>CommitLog</code> åå‘ç”Ÿäº§è€…å“åº”ï¼Œæ¶ˆè´¹è€…æ ¹æ® <code>ConsumeQueue</code> ç´¢å¼•ä» <code>CommitLog</code> ä¸­è¯»å–æ¶ˆæ¯è¿›è¡Œæ¶ˆè´¹ã€‚åœ¨ RocketMQ é›†ç¾¤ä¸­ï¼Œå½“æŸä¸ª Broker èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶ï¼Œé€šè¿‡ <code>CommitLog</code> å’Œ <code>ConsumeQueue</code> çš„å‰¯æœ¬æœºåˆ¶ï¼Œæ¶ˆè´¹è€…å¯ä»¥ä»å…¶ä»–æ­£å¸¸èŠ‚ç‚¹ç»§ç»­æ¶ˆè´¹æ¶ˆæ¯ï¼Œç¡®ä¿æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚</td></tr><tr><td>åº”ç”¨åœºæ™¯</td><td>é€‚ç”¨äºå¯¹æ•°æ®ä¸€è‡´æ€§ã€äº‹åŠ¡å®Œæ•´æ€§è¦æ±‚é«˜çš„å…³ç³»å‹æ•°æ®å­˜å‚¨åœºæ™¯ï¼Œå¦‚ç”µå•†è®¢å•ç³»ç»Ÿã€é‡‘èäº¤æ˜“ç³»ç»Ÿç­‰ã€‚è¿™äº›åœºæ™¯éœ€è¦ä¿è¯æ•°æ®çš„å‡†ç¡®å’Œå¯é ï¼Œæ”¯æŒå¤æ‚çš„äº‹åŠ¡å¤„ç†å’Œ ACID ç‰¹æ€§ã€‚</td><td>é€‚ç”¨äºå¯¹è¯»å†™é€Ÿåº¦è¦æ±‚æé«˜ã€æ•°æ®é‡ç›¸å¯¹è¾ƒå°çš„åœºæ™¯ï¼Œå¦‚ç¼“å­˜æ•°æ®å­˜å‚¨ã€åˆ†å¸ƒå¼é”ã€è®¡æ•°å™¨ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ã€‚Redis çš„é«˜æ€§èƒ½å†…å­˜æ“ä½œå’Œä¸°å¯Œçš„æ•°æ®ç»“æ„ä½¿å…¶èƒ½å¤Ÿå¾ˆå¥½åœ°æ»¡è¶³è¿™äº›åœºæ™¯çš„éœ€æ±‚ã€‚</td><td>é€‚ç”¨äºå¤§è§„æ¨¡æ•°æ®çš„å®æ—¶å¤„ç†å’Œæµå¼è®¡ç®—åœºæ™¯ï¼Œå¦‚å®æ—¶æ—¥å¿—å¤„ç†ã€å®æ—¶ç›‘æ§æ•°æ®é‡‡é›†ç­‰ã€‚Kafka çš„é«˜ååé‡å’Œåˆ†å¸ƒå¼ç‰¹æ€§ä½¿å…¶èƒ½å¤Ÿå¤„ç†å¤§é‡çš„æ¶ˆæ¯æ•°æ®ï¼Œå¹¶ä¸”æ”¯æŒå¤šä¸ªæ¶ˆè´¹è€…åŒæ—¶æ¶ˆè´¹ã€‚</td><td>é€‚ç”¨äºå¯¹æ¶ˆæ¯å¯é æ€§ã€äº‹åŠ¡æ€§ã€é¡ºåºæ€§æœ‰ä¸¥æ ¼è¦æ±‚çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯ã€å¯é æ¶ˆæ¯æŠ•é€’ã€é«˜å¹¶å‘æ¶ˆæ¯å¤„ç†åœºæ™¯ï¼Œå¦‚ç”µå•†ä¸­çš„åˆ†å¸ƒå¼äº‹åŠ¡è®¢å•å¤„ç†ã€é‡‘èç³»ç»Ÿçš„èµ„é‡‘è½¬è´¦é€šçŸ¥ç­‰ã€‚</td></tr><tr><td>æ€§èƒ½ç‰¹ç‚¹</td><td>æ”¯æŒå¤æ‚çš„äº‹åŠ¡å¤„ç†å’Œ ACID ç‰¹æ€§ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ï¼Œä½†å†™å…¥æ€§èƒ½ç›¸å¯¹è¾ƒä½ï¼Œå°¤å…¶æ˜¯åœ¨é«˜å¹¶å‘äº‹åŠ¡åœºæ™¯ä¸‹ã€‚å› ä¸ºæ¯æ¬¡äº‹åŠ¡æ“ä½œéƒ½éœ€è¦å†™å…¥ <code>redo log</code>ï¼Œä¼šæœ‰ä¸€å®šçš„ç£ç›˜ I/O å¼€é”€ã€‚</td><td>è¯»å†™é€Ÿåº¦æå¿«ï¼ŒåŸºäºå†…å­˜æ“ä½œï¼Œæ”¯æŒå¤šç§æ•°æ®ç»“æ„ï¼Œèƒ½åº”å¯¹é«˜å¹¶å‘çš„è¯»å†™è¯·æ±‚ã€‚ä½†æ•°æ®é‡è¿‡å¤§æ—¶å†…å­˜å ç”¨è¾ƒé«˜ï¼ŒAOF æŒä¹…åŒ–ä¼šå¸¦æ¥ä¸€å®šçš„ç£ç›˜ I/O å¼€é”€ï¼Œå½±å“å†™å…¥æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨ä½¿ç”¨ <code>always</code> åŒæ­¥ç­–ç•¥æ—¶ã€‚</td><td>å…·æœ‰é«˜ååé‡ï¼Œèƒ½å¤Ÿå¤„ç†å¤§é‡çš„æ¶ˆæ¯æ•°æ®ï¼Œé€‚åˆåˆ†å¸ƒå¼ã€é«˜å¹¶å‘çš„åœºæ™¯ã€‚ä½†æ¶ˆæ¯çš„å¤„ç†å»¶è¿Ÿç›¸å¯¹è¾ƒé«˜ï¼Œå› ä¸ºæ¶ˆæ¯éœ€è¦å…ˆå†™å…¥ç£ç›˜ï¼Œç„¶åå†ç”±æ¶ˆè´¹è€…è¯»å–ã€‚</td><td>å…·æœ‰é«˜å¯é æ€§ï¼Œä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€ä¸é‡å¤ï¼Œæ”¯æŒäº‹åŠ¡æ¶ˆæ¯å’Œé¡ºåºæ¶ˆæ¯ã€‚æ€§èƒ½è¾ƒé«˜ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä»èƒ½ä¿æŒç¨³å®šçš„æ¶ˆæ¯å¤„ç†èƒ½åŠ›ï¼Œé€šè¿‡é¡ºåºå†™å…¥ <code>CommitLog</code> å’Œé«˜æ•ˆçš„ <code>ConsumeQueue</code> ç´¢å¼•æœºåˆ¶æé«˜äº†è¯»å†™æ€§èƒ½ã€‚</td></tr><tr><td>é›†ç¾¤éƒ¨ç½²æ–¹å¼</td><td>å¸¸è§çš„æœ‰ä¸»ä»å¤åˆ¶ã€è¯»å†™åˆ†ç¦»é›†ç¾¤ï¼Œé€šè¿‡å¤åˆ¶æœºåˆ¶å®ç°æ•°æ®åŒæ­¥ï¼Œæå‡è¯»å–æ€§èƒ½å’Œæ•°æ®å†—ä½™å¤‡ä»½ï¼›ä¹Ÿå¯é‡‡ç”¨ Galera Cluster ç­‰å¤šä¸»é›†ç¾¤ï¼Œå®ç°å¤šèŠ‚ç‚¹åŒæ—¶è¯»å†™ï¼Œæé«˜ç³»ç»Ÿçš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</td><td>Redis Cluster é›†ç¾¤é€šè¿‡åˆ†ç‰‡æœºåˆ¶å°†æ•°æ®åˆ†å¸ƒåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œå®ç°é«˜å¯ç”¨å’Œæ°´å¹³æ‰©å±•ï¼›å“¨å…µæ¨¡å¼ç”¨äºç›‘æ§ä¸»èŠ‚ç‚¹çŠ¶æ€ï¼Œåœ¨ä¸»èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨è¿›è¡Œæ•…éšœè½¬ç§»ï¼Œä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</td><td>é‡‡ç”¨å¤šèŠ‚ç‚¹é›†ç¾¤ï¼Œé€šè¿‡åˆ†åŒºå’Œå‰¯æœ¬æœºåˆ¶å®ç°é«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡ã€‚æ¯ä¸ªåˆ†åŒºå¯ä»¥åˆ†å¸ƒåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œæé«˜æ•°æ®çš„å¯é æ€§å’Œè¯»å†™æ€§èƒ½ï¼Œå¤šä¸ªå‰¯æœ¬ä¿è¯äº†æ•°æ®çš„å†—ä½™å’Œå®¹é”™èƒ½åŠ›ã€‚</td><td>NameServer é›†ç¾¤è´Ÿè´£ç®¡ç† Broker èŠ‚ç‚¹ä¿¡æ¯å’Œè·¯ç”±ä¿¡æ¯ï¼ŒBroker é›†ç¾¤è´Ÿè´£å­˜å‚¨å’Œå¤„ç†æ¶ˆæ¯ï¼Œé€šè¿‡å¤š Master å¤š Slave æ¨¡å¼å®ç°é«˜å¯ç”¨å’Œæ•°æ®å†—ä½™ã€‚æ¶ˆè´¹è€…å¯ä»¥æ ¹æ® NameServer æä¾›çš„è·¯ç”±ä¿¡æ¯ä» Broker èŠ‚ç‚¹æ¶ˆè´¹æ¶ˆæ¯ã€‚</td></tr></tbody></table></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">Last update: </span><!----></div><div class="contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: 1073825890@qq.com">gaoqisen</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/database/elk.html" class="nav-link prev" aria-label="linux+elasticsearch+logstash è‡ªåŠ¨åŒæ­¥mysqlå®ç°æœç´¢å¼•æ“"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->linux+elasticsearch+logstash è‡ªåŠ¨åŒæ­¥mysqlå®ç°æœç´¢å¼•æ“</div></a><a href="/database/mysql0_base.html" class="nav-link next" aria-label="Mysql-åŸºç¡€"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Mysql-åŸºç¡€<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-f4339f74.js" defer></script>
  </body>
</html>
